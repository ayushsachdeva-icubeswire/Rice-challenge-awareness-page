<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Rice Your Awareness by Daawat</title>
    <link rel="shortcut icon" href="img/DAAWAT-Logo-white.png" type="image/x-icon" />
    <!-- Open Graph / Facebook -->
    <meta property="og:title" content="Join #OnlyRiceNovember Challenge" />
    <meta property="og:description" content="Rice Your Awareness and Feel the Power of Rice" />
    <meta property="og:image" content="img/og-new.png" />

    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <!-- Animate.css for fade-in -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet" />

    <!-- Tabler Icons CDN -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/icons-webfont@latest/tabler-icons.min.css" />

    <!-- Swiper CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

    <!-- Google Tag Manager -->
    <script>
        (function (w, d, s, l, i) {
            w[l] = w[l] || [];
            w[l].push({
                "gtm.start": new Date().getTime(),
                event: "gtm.js",
            });
            var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s),
                dl = l != "dataLayer" ? "&l=" + l : "";
            j.async = true;
            j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
            f.parentNode.insertBefore(j, f);
        })(window, document, "script", "dataLayer", "GTM-558TRVFF");
    </script>
    <script>
        // Simple interval to call progress API every 10 seconds for guaranteed execution
        // setInterval(() => {
        //   fetchProgressData();
        // }, 10000);
    </script>
    <!-- End Google Tag Manager -->

    <link rel="stylesheet" href="style.css?v=1" />
    <style>
        /* .card1,
        .card2 {
            display: block;
            position: relative;
            padding-bottom: 0.72em;
            font-size: 40px;
            line-height: 0.95;
            border-radius: 40px;
            box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.3);
        } */

        .modal-bg-image {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            border-radius: inherit;
            opacity: 0.1;
            z-index: -1;
        }

        .custom-modal1 {
            position: relative;
            overflow: hidden;
        }

        .image-placeholder img {
            position: absolute;
            height: 125%;
            width: 440px;
            object-fit: contain;
            /* top: -52px; */
            bottom: 0;
            right: 40px;
        }

        @media (max-width: 768px) {
            .content-section {
                padding: 20px 10px 0px 10px !important;
            }

            .p-tag span {
                font-size: 22px;
                font-weight: 600;
                color: #fff !important;
            }

            .logo-img {
                width: 160px;
                margin-bottom: 0px !important;
            }

            .content-section .title {
                color: white;
                font-weight: 400;
                font-size: 38px;
                text-align: center;
            }
        }
    </style>
</head>

<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-558TRVFF" height="0" width="0"
            style="display: none; visibility: hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <section class="header-bg">
        <div class="container px-0 flex-wrap">
            <!-- Left side: Social icons -->
            <!-- <div class="social-icons">
                <a href="https://facebook.com" style="text-decoration: none;" target="_blank"><i
                        class="ti ti-brand-facebook"></i></a>
                <a href="https://twitter.com" style="text-decoration: none;" target="_blank"><i
                        class="ti ti-brand-twitter"></i></a>
                <a href="https://instagram.com" style="text-decoration: none;" target="_blank"><i
                        class="ti ti-brand-instagram"></i></a>
                <a href="https://linkedin.com" style="text-decoration: none;" target="_blank"><i
                        class="ti ti-brand-linkedin"></i></a>
            </div> -->

            <div class="py-1">
                <img src="img/DAAWAT-Logo-white.png" width="120" alt="" />
            </div>

            <!-- Hamburger (for mobile) -->
            <div class="hamburger" onclick="toggleMenu()">
                <span></span>
                <span></span>
                <span></span>
            </div>

            <!-- Navigation (desktop + mobile sliding menu) -->
            <nav class="header-nav" id="navMenu">
                <!-- Close button (visible only in mobile menu) -->
                <div class="close-btn1" onclick="toggleMenu()">
                    <i class="ti ti-x"></i>
                </div>

                <div class="py-2 d-block d-md-none">
                    <img src="img/DAAWAT-Logo-white.png" width="120" alt="" />
                </div>
                <a href="#movement"  class="d-none d-md-block">The Movement</a>

                <a href="#movement-mob" class="d-block d-md-none">The Movement</a>

                <!-- mobile Share Button -->
                <a href="#" id="shareBtn" class="d-flex d-md-none">Share</a>

                <!-- Desktop Share Button -->
                <a href="#" id="shareBtnDesktop" class="d-none d-md-flex">Share</a>

                <!-- Share Menu for Desktop -->
                <div id="shareMenu" class="share-menu">
                    <a href="#" class="share-icon" id="shareFb"><i class="ti ti-brand-facebook"></i></a>
                    <a href="#" class="share-icon" id="shareLinkedin"><i class="ti ti-brand-linkedin"></i></a>
                    <a href="#" class="share-icon" id="shareTwitter"><i class="ti ti-brand-twitter"></i></a>
                </div>

                <a href="#myths">Myths</a>
                <a href="#faqs">FAQs</a>
            </nav>
        </div>
        <!-- Overlay (click to close on mobile) -->
        <div class="menu-overlay" id="menuOverlay" onclick="toggleMenu()"></div>
    </section>

    <!-- Hero Section -->
    <section class="hero animate__animated animate__fadeIn w-100" style="padding: 40px 0px 10px 0px">
        <img class="logo-img" src="img/RYA-unit.png" alt="" />

        <div class="container pt-4">
            <div class="row w-100 mx-auto content-section" style="position: relative; overflow: visible">
                <div class="col-12 col-lg-11 px-1 text-start">
                    <h1 class="title">Only Rice November</h1>
                    <p class="subtitle">Wake up, Rice Your Awareness & Feel the Power</p>
                    <!-- <p class="subtitle">This November, break the myths and<br class="d-none d-lg-block">make <span>Rice
                            Right</span> again</p> -->

                    <div
                        class="mt-4 d-flex gap-5 align-items-start mt-4 flex-wrap justify-content-center justify-content-lg-start">
                        <div class="text-center text-lg-start">
                            <button class="animated-button animated-button-w btn mt-0 mb-0" style="font-size: 26px"
                                onclick="openChallengeModal();">
                                <svg viewBox="0 0 24 24" class="arr-2" xmlns="http://www.w3.org/2000/svg"
                                    style="fill: #110d85">
                                    <path
                                        d="M16.1716 10.9999L10.8076 5.63589L12.2218 4.22168L20 11.9999L12.2218 19.778L10.8076 18.3638L16.1716 12.9999H4V10.9999H16.1716Z">
                                    </path>
                                </svg>
                                <span class="text btn-text">Take the Challenge</span>
                                <span class="circle"></span>
                                <svg viewBox="0 0 24 24" class="arr-1" xmlns="http://www.w3.org/2000/svg"
                                    style="fill: #110d85">
                                    <path
                                        d="M16.1716 10.9999L10.8076 5.63589L12.2218 4.22168L20 11.9999L12.2218 19.778L10.8076 18.3638L16.1716 12.9999H4V10.9999H16.1716Z">
                                    </path>
                                </svg>
                            </button>

                            <div class="d-flex justify-content-center justify-content-lg-start gap-2 mt-4">
                                <div id="countdown1"></div>
                            </div>

                            <p class="counter-label mb-0">Challenges Taken</p>
                        </div>
                    </div>
                </div>

                <div class="col-lg-1 image-section pt-2 py-lg-0 d-xl-block">
                    <div class="image-placeholder d-none d-lg-block">
                        <img src="img/heart1.png" alt="" />
                    </div>
                    <div class="container-fluid d-none d-lg-none justify-content-center">
                        <img src="img/heart1.png" alt="Shahrukh Banner" class="img-fluid srk-tablet"
                            style="max-height: 30vh; width: auto" />
                    </div>
                    <div class="d-block d-md-none pt-4" id="movement-mob">
                        <div class="text-center mb-2">
                            <h2 class="faq-title text-white">The Movement</h2>
                        </div>
                        <div class="container pt-0 pb-0">
                            <div class="row align-items-center py-0 py-md-4">
                                <div class="col-12 col-lg-6 text-center text-lg-start text-white">
                                    <p class="p-tag">
                                        This movement helps people understand rice the right way - as a food that brings
                                        balance,
                                        nourishment, and energy to everyday life.
                                    </p>

                                    <p class="p-tag">
                                        At the heart of this initiative lies <span>#OnlyRiceNovember</span> - a
                                        challenge led experience that inspires mindful eating and
                                        encourages people to discover how rice can make them feel more
                                        active, and truly energised.
                                    </p>

                                    <p class="p-tag d-none">
                                        Rich in natural carbohydrates, easy to digest, and naturally
                                        gluten-free, rice supports gut health, sustained energy, and
                                        overall well-being - making it a perfect fit for every lifestyle.
                                    </p>

                                    <p class="p-tag">
                                        Because good health doesn’t come from cutting food out - it comes
                                        from understanding it.
                                    </p>

                                    <p class="mb-4 p-tag">
                                        This November, be part of <span>#OnlyRiceNovember</span> and
                                        rediscover the real goodness of rice.
                                    </p>
                                </div>

                                <div class="col-12 col-lg-6 text-center mt-4 mt-lg-0 py-0" style="position: relative">
                                    <img src="img/the-movement.png" alt="Rice" class="img-fluid mx-auto movement-img" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Choose Your Rice Challenge -->
    <section class="rice-challenge text-center py-0">
        <div class="container d-flex flex-column gap-2 align-items-center">
            <div class="py-2 w-100">
                <!-- Heading -->
                <!-- <h1>Rice Your Awareness</h1> -->
                <div
                    class="d-flex justify-content-center justify-content-lg-between flex-wrap flex-lg-nowrap w-100 mt-0 my-md-4 heading-gap">
                    <div class="d-flex gap-3 align-items-center flex-column flex-lg-row py-3">
                        <img src="img/gold.png" width="70" class="rounded" alt="" />
                        <h2 class="mb-0 text-center text-lg-start text-32">
                            Earn Your <br /><span class="challenge-title">Badge of Honour</span>
                        </h2>
                    </div>

                    <div class="w-100 d-block d-lg-none">
                        <h2 class="mb-0">&amp;</h2>
                    </div>

                    <div class="d-flex align-items-center flex-lg-nowrap gap-4 py-3 flex-column flex-md-row">
                        <!-- Profile Section -->
                        <div class="d-none d-lg-flex align-items-center">
                            <img src="img/nmamiagarwal.jpeg" width="70" height="70"
                                class="rounded-circle me-3 shadow-sm" alt="nmami Agarwal" />
                            <div class="lh-sm py-2 text-start">
                                <a href="https://www.instagram.com/nmamiagarwal/" target="_blank"
                                    class="fw-semibold text-dark text-decoration-none d-block mb-1">
                                    Nmami Agarwal
                                </a>
                                <a href="https://www.instagram.com/nmamiagarwal/" target="_blank"
                                    class="text-muted text-decoration-none small d-block">
                                    @nmamiagarwal
                                </a>
                            </div>
                        </div>

                        <!-- Title Section -->
                        <div class="border-md-start-only ps-md-4 ms-md-2 text-start">
                            <h2 class="mb-0 text-center text-lg-start text-32">
                                Exclusive <br />
                                <span class="challenge-title">Expert-Crafted Meal Plan</span>
                            </h2>
                        </div>
                    </div>
                </div>
            </div>
            <!-- <h4>Select one of these</h4> -->
            <div class="row justify-content-center g-4 py-3 dynamic-challenge-options w-100"
                id="scrolltotakeChallengeBtn">
                <!-- 1 Week -->
                <div class="col-6 col-md-3 mt-2 mt-md-4">
                    <div class="challenge-card p-2 p-md-3 position-relative rounded-3 d-flex gap-2 justify-content-center align-items-center"
                        data-image="img/week1.jpg" data-share="https://example.com/week1.jpg" data-duration="7 days">
                        <h5 class="fw-bold mb-0">7 Days</h5>
                        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none"
                            stroke="#cd7f32" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"
                            class="icon icon-tabler icons-tabler-outline icon-tabler-award badge-icon-svg">
                            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                            <path d="M12 9m-6 0a6 6 0 1 0 12 0a6 6 0 1 0 -12 0" />
                            <path d="M12 15l3.4 5.89l1.598 -3.233l3.598 .232l-3.4 -5.889" />
                            <path d="M6.802 12l-3.4 5.89l3.598 -.233l1.598 3.232l3.4 -5.889" />
                        </svg>
                    </div>
                </div>
                <!-- 2 Weeks -->
                <div class="col-6 col-md-3 mt-2 mt-md-4">
                    <div class="challenge-card p-2 p-md-3 position-relative rounded-3 d-flex gap-2 justify-content-center align-items-center"
                        data-image="img/week2.jpg" data-share="https://example.com/week2.jpg" data-duration="14 days">
                        <h5 class="fw-bold mb-0">14 Days</h5>
                        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none"
                            stroke="#c0c0c0" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"
                            class="icon icon-tabler icons-tabler-outline icon-tabler-award badge-icon-svg">
                            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                            <path d="M12 9m-6 0a6 6 0 1 0 12 0a6 6 0 1 0 -12 0" />
                            <path d="M12 15l3.4 5.89l1.598 -3.233l3.598 .232l-3.4 -5.889" />
                            <path d="M6.802 12l-3.4 5.89l3.598 -.233l1.598 3.232l3.4 -5.889" />
                        </svg>
                    </div>
                </div>
                <!-- 3 Weeks -->
                <div class="col-6 col-md-3 mt-2 mt-md-4">
                    <div class="challenge-card p-2 p-md-3 position-relative rounded-3 d-flex gap-2 justify-content-center align-items-center"
                        data-image="img/week3.jpg" data-share="https://example.com/week3.jpg" data-duration="21 days">
                        <h5 class="fw-bold mb-0">21 Days</h5>
                        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none"
                            stroke="#ffd700" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"
                            class="icon icon-tabler icons-tabler-outline icon-tabler-award badge-icon-svg">
                            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                            <path d="M12 9m-6 0a6 6 0 1 0 12 0a6 6 0 1 0 -12 0" />
                            <path d="M12 15l3.4 5.89l1.598 -3.233l3.598 .232l-3.4 -5.889" />
                            <path d="M6.802 12l-3.4 5.89l3.598 -.233l1.598 3.232l3.4 -5.889" />
                        </svg>
                    </div>
                </div>
                <!-- 30 Days -->
                <div class="col-6 col-md-3 mt-2 mt-md-4">
                    <div class="challenge-card p-2 p-md-3 position-relative rounded-3 d-flex gap-2 justify-content-center align-items-center"
                        data-image="img/30days.jpg" data-share="https://example.com/30days.jpg" data-duration="30 days">
                        <h5 class="fw-bold mb-0">30 Days</h5>
                        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none"
                            stroke="#7ac1cc" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"
                            class="icon icon-tabler icons-tabler-outline icon-tabler-award badge-icon-svg">
                            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                            <path d="M12 9m-6 0a6 6 0 1 0 12 0a6 6 0 1 0 -12 0" />
                            <path d="M12 15l3.4 5.89l1.598 -3.233l3.598 .232l-3.4 -5.889" />
                            <path d="M6.802 12l-3.4 5.89l3.598 -.233l1.598 3.232l3.4 -5.889" />
                        </svg>
                    </div>
                </div>
            </div>

            <!-- Error message for challenge selection -->
            <div class="text-danger text-center mb-3" id="challengeSelectionError"
                style="display: none; font-weight: bold"></div>

            <!-- Myths Busted Button -->
            <button class="animated-button btn mt-3 mb-5" id="takeChallengeBtn">
                <svg viewBox="0 0 24 24" class="arr-2" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M16.1716 10.9999L10.8076 5.63589L12.2218 4.22168L20 11.9999L12.2218 19.778L10.8076 18.3638L16.1716 12.9999H4V10.9999H16.1716Z">
                    </path>
                </svg>
                <span class="text">Take the Challenge</span>
                <span class="circle"></span>
                <svg viewBox="0 0 24 24" class="arr-1" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M16.1716 10.9999L10.8076 5.63589L12.2218 4.22168L20 11.9999L12.2218 19.778L10.8076 18.3638L16.1716 12.9999H4V10.9999H16.1716Z">
                    </path>
                </svg>
            </button>

            <!-- Dynamic Modal -->
            <div class="modal fade" id="dynamicChallengeModal" tabindex="-1" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered modal-portrait">
                    <div class="modal-content custom-modal1">
                        <!-- Dynamic Modal Background Image -->
                        <div id="dynamicModalImage" class="modal-bg-image"></div>

                        <!-- Close Button -->
                        <button type="button" class="btn-close custom-close" data-bs-dismiss="modal" aria-label="Close">
                            <i class="ti ti-x"></i>
                        </button>

                        <!-- Share Button -->
                        <button class="btn btn-light btn-sm position-absolute" id="dynamicShareBtn"
                            style="top: 15px; right: 50px">
                            <i class="ti ti-share"></i>
                        </button>

                        <!-- Modal Body -->
                        <div class="modal-body text-center h-100 d-flex align-items-center justify-content-center">
                            <div class="quiz-card py-5 px-3 px-lg-5 w-100">
                                <h5 id="quiz-question" class="mb-4"></h5>
                                <div id="quiz-options"></div>
                                <button class="btn btn-dark mt-4 w-100" id="next-btn">
                                    Next
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- <section class="d-block d-xl-none py-4">
        <div class="container-fluid d-flex justify-content-center">
            <img src="img/heart1.png" alt="Shahrukh Banner" class="img-fluid" style="max-height: 50vh; width: auto;">
        </div>
    </section> -->

    <section class="slider-section py-0 pb-md-0 mb-5">
        <!-- 30 Days Challenge -->
        <div class="challenge-section animate__animated animate__fadeIn pb-0">
            <h2 class="30days">People Embracing <span>#OnlyRiceNovember</span></h2>
            <!-- <p class="mb-2 mb-md-0" style="color: #535151;font-size: 24px;">This November, pledge to Rice Your
                Awareness. <br> A month to
                consume rice, rise
                above myths, and turn doubt into discovery.
            </p> -->
        </div>

        <!-- Mobile Auto-Scrolling Slider -->
        <div class="mobile-slider">
            <div class="mobile-track">
                <div class="card">
                    <a href="javascript:void(0)" style="cursor: default">
                        <!-- <div class="overlay">
                            <i class="ti ti-player-play-filled"></i>
                        </div> -->
                        <img src="img/slider/1.jpeg" />
                    </a>
                </div>
                <div class="card">
                    <a href="javascript:void(0)" style="cursor: default">
                        <!-- <div class="overlay">
                            <i class="ti ti-player-play-filled"></i>
                        </div> -->
                        <img src="img/slider/2.jpeg" />
                    </a>
                </div>
                <div class="card">
                    <a href="javascript:void(0)" style="cursor: default">
                        <!-- <div class="overlay">
                            <i class="ti ti-player-play-filled"></i>
                        </div> -->
                        <img src="img/slider/3.jpeg" />
                    </a>
                </div>
                <div class="card">
                    <a href="javascript:void(0)" style="cursor: default">
                        <!-- <div class="overlay">
                            <i class="ti ti-player-play-filled"></i>
                        </div> -->
                        <img src="img/slider/4.jpeg" />
                    </a>
                </div>
                <div class="card">
                    <a href="javascript:void(0)" style="cursor: default">
                        <!-- <div class="overlay">
                            <i class="ti ti-player-play-filled"></i>
                        </div> -->
                        <img src="img/slider/1.jpeg" />
                    </a>
                </div>
                <div class="card">
                    <a href="javascript:void(0)" style="cursor: default">
                        <!-- <div class="overlay">
                            <i class="ti ti-player-play-filled"></i>
                        </div> -->
                        <img src="img/slider/2.jpeg" />
                    </a>
                </div>
                <div class="card">
                    <a href="javascript:void(0)" style="cursor: default">
                        <!-- <div class="overlay">
                            <i class="ti ti-player-play-filled"></i>
                        </div> -->
                        <img src="img/slider/3.jpeg" />
                    </a>
                </div>
                <div class="card">
                    <a href="javascript:void(0)" style="cursor: default">
                        <!-- <div class="overlay">
                            <i class="ti ti-player-play-filled"></i>
                        </div> -->
                        <img src="img/slider/4.jpeg" />
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- FAQ intro: left content + right image -->
    <section class="d-none d-md-block pb-0 py-lg-5 interaction-section" id="movement">
        <div class="text-center mb-4">
            <h2 class="faq-title">The Movement</h2>
        </div>
        <div class="container">
            <div class="row align-items-center pb-0 py-lg-4">
                <div class="col-12 col-lg-6 text-center text-lg-start">
                    <p class="p-tag">
                        This movement helps people understand rice the right way - as a food that brings balance,
                        nourishment, and energy to everyday life.
                    </p>

                    <p class="p-tag">
                        At the heart of this initiative lies <span>#OnlyRiceNovember</span> - a
                        challenge led experience that inspires mindful eating and
                        encourages people to discover how rice can make them feel more
                        active, and truly energised.
                    </p>

                    <p class="p-tag d-none">
                        Rich in natural carbohydrates, easy to digest, and naturally
                        gluten-free, rice supports gut health, sustained energy, and
                        overall well-being - making it a perfect fit for every lifestyle.
                    </p>

                    <p class="p-tag">
                        Because good health doesn’t come from cutting food out - it comes
                        from understanding it.
                    </p>

                    <p class="mb-4 p-tag">
                        This November, be part of <span>#OnlyRiceNovember</span> and
                        rediscover the real goodness of rice.
                    </p>
                </div>

                <div class="col-12 col-lg-6 text-center mt-4 mt-lg-0" style="position: relative">
                    <img src="img/the-movement.png" alt="Rice" class="img-fluid mx-auto movement-img" />
                </div>
            </div>
        </div>
    </section>

    <section class="interaction-section1 py-5 mb-4">
        <h2 class="text-center mb-4 text-white">People talking about it</h2>

        <div class="container w-100">
            <div class="row justify-content-center text-center text-white w-100 mx-auto">
                <div class="col-12 col-md-12">
                    <!-- Counter placeholder - add your code here -->
                    <div class="counter-placeholder px-0">
                        <div>
                            <div id="countdown2"></div>
                        </div>
                        <h5 class="counter-label mb-0">Total interactions so far</h5>
                        <div class="d-flex gap-4 mt-4 align-items-center justify-content-center flex-wrap">
                            <div>
                                <button class="animated-button animated-button-w btn mb-0"
                                    onclick="openChallengeModal();">
                                    <svg viewBox="0 0 24 24" class="arr-2" xmlns="http://www.w3.org/2000/svg"
                                        style="fill: #110d85">
                                        <path
                                            d="M16.1716 10.9999L10.8076 5.63589L12.2218 4.22168L20 11.9999L12.2218 19.778L10.8076 18.3638L16.1716 12.9999H4V10.9999H16.1716Z">
                                        </path>
                                    </svg>
                                    <span class="text btn-text">Take the Challenge</span>
                                    <span class="circle"></span>
                                    <svg viewBox="0 0 24 24" class="arr-1" xmlns="http://www.w3.org/2000/svg"
                                        style="fill: #110d85">
                                        <path
                                            d="M16.1716 10.9999L10.8076 5.63589L12.2218 4.22168L20 11.9999L12.2218 19.778L10.8076 18.3638L16.1716 12.9999H4V10.9999H16.1716Z">
                                        </path>
                                    </svg>
                                </button>
                            </div>
                            <div class="actions mb-0 justify-content-center justify-content-md-center">
                                <button class="animated-button animated-button-w btn mt-0 mb-0 d-flex d-md-none"
                                    id="shareBtn">
                                    <svg viewBox="0 0 24 24" class="arr-2" xmlns="http://www.w3.org/2000/svg"
                                        style="fill: #110d85">
                                        <path
                                            d="M16.1716 10.9999L10.8076 5.63589L12.2218 4.22168L20 11.9999L12.2218 19.778L10.8076 18.3638L16.1716 12.9999H4V10.9999H16.1716Z">
                                        </path>
                                    </svg>
                                    <span class="text btn-text">Share</span>
                                    <span class="circle"></span>
                                    <svg viewBox="0 0 24 24" class="arr-1" xmlns="http://www.w3.org/2000/svg"
                                        style="fill: #110d85">
                                        <path
                                            d="M16.1716 10.9999L10.8076 5.63589L12.2218 4.22168L20 11.9999L12.2218 19.778L10.8076 18.3638L16.1716 12.9999H4V10.9999H16.1716Z">
                                        </path>
                                    </svg>
                                </button>

                                <div class="position-relative">
                                    <button class="animated-button animated-button-w btn mt-0 mb-0 d-none d-md-flex"
                                        id="shareBtnDesktop2">
                                        <svg viewBox="0 0 24 24" class="arr-2" xmlns="http://www.w3.org/2000/svg"
                                            style="fill: #110d85">
                                            <path
                                                d="M16.1716 10.9999L10.8076 5.63589L12.2218 4.22168L20 11.9999L12.2218 19.778L10.8076 18.3638L16.1716 12.9999H4V10.9999H16.1716Z">
                                            </path>
                                        </svg>
                                        <span class="text btn-text">Share</span>
                                        <span class="circle"></span>
                                        <svg viewBox="0 0 24 24" class="arr-1" xmlns="http://www.w3.org/2000/svg"
                                            style="fill: #110d85">
                                            <path
                                                d="M16.1716 10.9999L10.8076 5.63589L12.2218 4.22168L20 11.9999L12.2218 19.778L10.8076 18.3638L16.1716 12.9999H4V10.9999H16.1716Z">
                                            </path>
                                        </svg>
                                    </button>

                                    <!-- Share Menu for Desktop -->
                                    <div id="shareMenu" class="share-menu share-menu1">
                                        <a href="#" class="share-icon" id="shareFb2"><i
                                                class="ti ti-brand-facebook"></i></a>
                                        <a href="#" class="share-icon" id="shareLinkedin2"><i
                                                class="ti ti-brand-linkedin"></i></a>
                                        <a href="#" class="share-icon" id="shareTwitter2"><i
                                                class="ti ti-brand-twitter"></i></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <section class="small-cards-section" id="myths">
        <h2 class="section-title text-center">
            <span>Myth Busting</span> Rice Facts
        </h2>

        <div class="container">
            <div class="row g-4 py-4">
                <!-- Card 1 -->
                <div class="col-12 col-md-6">
                    <div class="rice-card">
                        <div class="card-content">
                            <div class="myth-section">
                                <div class="myth-badge">Myth</div>
                                <div class="myth-text">Rice makes you sleepy</div>
                            </div>

                            <div class="card-divider"></div>

                            <div class="fact-section">
                                <div class="fact-badge">Fact</div>
                                <div class="fact-text">
                                    Rice helps release serotonin and melatonin - nature's sleep
                                    aids. It's science, not sluggishness.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Card 2 -->
                <div class="col-12 col-md-6">
                    <div class="rice-card">
                        <div class="card-content">
                            <div class="myth-section">
                                <div class="myth-badge">Myth</div>
                                <div class="myth-text">Rice makes you feel heavy or lazy</div>
                            </div>

                            <div class="card-divider"></div>

                            <div class="fact-section">
                                <div class="fact-badge">Fact</div>
                                <div class="fact-text">
                                    Rice digests faster and is naturally gluten-free, making it
                                    easy on the stomach and feeling light.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Card 3 -->
                <div class="col-12 col-md-6">
                    <div class="rice-card">
                        <div class="card-content">
                            <div class="myth-section">
                                <div class="myth-badge">Myth</div>
                                <div class="myth-text">Fitness means cutting out rice</div>
                            </div>

                            <div class="card-divider"></div>

                            <div class="fact-section">
                                <div class="fact-badge">Fact</div>
                                <div class="fact-text">
                                    Many athletes and trainers rely on rice for sustained energy
                                    and muscle recovery. Balance builds fitness, not
                                    deprivation.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Card 4 -->
                <div class="col-12 col-md-6">
                    <div class="rice-card">
                        <div class="card-content">
                            <div class="myth-section">
                                <div class="myth-badge">Myth</div>
                                <div class="myth-text">Rice causes bloating</div>
                            </div>

                            <div class="card-divider"></div>

                            <div class="fact-section">
                                <div class="fact-badge">Fact</div>
                                <div class="fact-text">
                                    Rice is low in sodium and gluten-free - it actually reduces
                                    water retention and soothes digestion.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Card 5 -->
                <div class="col-12 col-md-6">
                    <div class="rice-card">
                        <div class="card-content">
                            <div class="myth-section">
                                <div class="myth-badge">Myth</div>
                                <div class="myth-text">You should avoid rice for dinner</div>
                            </div>

                            <div class="card-divider"></div>

                            <div class="fact-section">
                                <div class="fact-badge">Fact</div>
                                <div class="fact-text">
                                    Rice is light, easy to digest, and helps relax your system -
                                    perfect for calm, quality sleep.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Card 6 -->
                <div class="col-12 col-md-6">
                    <div class="rice-card">
                        <div class="card-content">
                            <div class="myth-section">
                                <div class="myth-badge">Myth</div>
                                <div class="myth-text">Skipping rice helps detox</div>
                            </div>

                            <div class="card-divider"></div>

                            <div class="fact-section">
                                <div class="fact-badge">Fact</div>
                                <div class="fact-text">
                                    Rice with dal, veggies, or curd is part of natural Ayurvedic
                                    detox meals - it calms the system and restores balance.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Card 7 -->
                <div class="col-12 col-md-6">
                    <div class="rice-card">
                        <div class="card-content">
                            <div class="myth-section">
                                <div class="myth-badge">Myth</div>
                                <div class="myth-text">
                                    Rice isn't suitable for weight loss
                                </div>
                            </div>

                            <div class="card-divider"></div>

                            <div class="fact-section">
                                <div class="fact-badge">Fact</div>
                                <div class="fact-text">
                                    When portioned and paired right, rice supports clean eating
                                    and steady energy - gives far better results.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Card 8 -->
                <div class="col-12 col-md-6">
                    <div class="rice-card">
                        <div class="card-content">
                            <div class="myth-section">
                                <div class="myth-badge">Myth</div>
                                <div class="myth-text">Rice has empty calories</div>
                            </div>

                            <div class="card-divider"></div>

                            <div class="fact-section">
                                <div class="fact-badge">Fact</div>
                                <div class="fact-text">
                                    Rice provides complex carbs and essential nutrients that
                                    support metabolism and brain function - not "empty," but
                                    essential.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <section class="fun-facts-section" id="fun-facts">
        <h2 class="section-title text-center">
            <span>Fun Facts:</span> <br class="d-block d-md-none"> The Light Side of Rice
        </h2>

        <div class="container d-block">
            <div class="row g-4 py-4 justify-content-center" id="fun-facts-row">
                <!-- Each Fun Fact Card -->
                <div class="col-12 col-md-6 col-xl-4">
                    <div class="fun-card">
                        <div class="fun-card-content">
                            <div class="fun-badge">Fun Fact</div>
                            <h3 class="fun-heading">
                                Rice has more varieties than Netflix has shows — over 40,000 kinds worldwide.
                            </h3>
                            <p class="fun-text"><em>And none of them buffer.</em></p>
                        </div>
                    </div>
                </div>

                <div class="col-12 col-md-6 col-xl-4">
                    <div class="fun-card">
                        <div class="fun-card-content">
                            <div class="fun-badge">Fun Fact</div>
                            <h3 class="fun-heading">
                                The Japanese word for “meal” is the same as “rice” — Gohan.
                            </h3>
                            <p class="fun-text"><em>Because without rice, dinner doesn’t even exist.</em></p>
                        </div>
                    </div>
                </div>

                <div class="col-12 col-md-6 col-xl-4">
                    <div class="fun-card">
                        <div class="fun-card-content">
                            <div class="fun-badge">Fun Fact</div>
                            <h3 class="fun-heading">
                                The aroma of basmati comes from the same natural compound that makes popcorn smell
                                amazing.
                            </h3>
                            <p class="fun-text"><em>Biryani is science-approved popcorn.</em></p>
                        </div>
                    </div>
                </div>

                <div class="col-12 col-md-6 col-xl-4">
                    <div class="fun-card">
                        <div class="fun-card-content">
                            <div class="fun-badge">Fun Fact</div>
                            <h3 class="fun-heading">
                                Some rice turns purple when cooked — naturally full of antioxidants.
                            </h3>
                            <p class="fun-text"><em>The grain that wears royalty well.</em></p>
                        </div>
                    </div>
                </div>

                <div class="col-12 col-md-6 col-xl-4">
                    <div class="fun-card">
                        <div class="fun-card-content">
                            <div class="fun-badge">Fun Fact</div>
                            <h3 class="fun-heading">
                                Cold rice is actually healthier — it forms “resistant starch” that’s great for your gut.
                            </h3>
                            <p class="fun-text"><em>Leftovers got their redemption arc.</em></p>
                        </div>
                    </div>
                </div>

                <div class="col-12 col-md-6 col-xl-4">
                    <div class="fun-card">
                        <div class="fun-card-content">
                            <div class="fun-badge">Fun Fact</div>
                            <h3 class="fun-heading">
                                There’s a rice variety in the Philippines so small it’s called “Pinawkan” — the baby
                                rice.
                            </h3>
                            <p class="fun-text"><em>Tiny but mighty.</em></p>
                        </div>
                    </div>
                </div>

                <!-- Hidden Cards (Show More) -->
                <div class="col-12 col-md-6 col-xl-4 hidden-card">
                    <div class="fun-card">
                        <div class="fun-card-content">
                            <div class="fun-badge">Fun Fact</div>
                            <h3 class="fun-heading">
                                Rice can grow in both floods and droughts.
                            </h3>
                            <p class="fun-text"><em>The overachiever of the grain world.</em></p>
                        </div>
                    </div>
                </div>

                <div class="col-12 col-md-6 col-xl-4 hidden-card">
                    <div class="fun-card">
                        <div class="fun-card-content">
                            <div class="fun-badge">Fun Fact</div>
                            <h3 class="fun-heading">
                                NASA once sent rice to space to study how it grows without gravity.
                            </h3>
                            <p class="fun-text"><em>Turns out, rice also shoots for the stars.</em></p>
                        </div>
                    </div>
                </div>

                <div class="col-12 col-md-6 col-xl-4 hidden-card">
                    <div class="fun-card">
                        <div class="fun-card-content">
                            <div class="fun-badge">Fun Fact</div>
                            <h3 class="fun-heading">
                                Basmati rice expands twice its length when cooked — that’s over 8mm of graceful
                                stretching.
                            </h3>
                            <p class="fun-text"><em>Fitness goals: achieve basmati flexibility.</em></p>
                        </div>
                    </div>
                </div>

                <div class="col-12 col-md-6 col-xl-4 hidden-card">
                    <div class="fun-card">
                        <div class="fun-card-content">
                            <div class="fun-badge">Fun Fact</div>
                            <h3 class="fun-heading">
                                The oldest rice ever discovered is 10,000 years old.
                            </h3>
                            <p class="fun-text"><em>Still ageing better than most skincare routines.</em></p>
                        </div>
                    </div>
                </div>

                <div class="col-12 col-md-6 col-xl-4 hidden-card">
                    <div class="fun-card">
                        <div class="fun-card-content">
                            <div class="fun-badge">Fun Fact</div>
                            <h3 class="fun-heading">
                                Rice water was the original Korean beauty secret long before serums went viral.
                            </h3>
                            <p class="fun-text"><em>Ancient glow-up recipe: just add rice.</em></p>
                        </div>
                    </div>
                </div>

                <div class="col-12 col-md-6 col-xl-4 hidden-card">
                    <div class="fun-card">
                        <div class="fun-card-content">
                            <div class="fun-badge">Fun Fact</div>
                            <h3 class="fun-heading">
                                Farmers in some cultures sing to their rice fields believing the crops grow better.
                            </h3>
                            <p class="fun-text"><em>That’s farm-to-soul care.</em></p>
                        </div>
                    </div>
                </div>

                <div class="col-12 col-md-6 col-xl-4 hidden-card">
                    <div class="fun-card">
                        <div class="fun-card-content">
                            <div class="fun-badge">Fun Fact</div>
                            <h3 class="fun-heading">
                                Rice doesn’t just feed people — it also builds houses. Its husk ash is used in
                                eco-cement and bio-bricks.
                            </h3>
                            <p class="fun-text"><em>Sustains the planet, then builds it too.</em></p>
                        </div>
                    </div>
                </div>

                <div class="col-12 col-md-6 col-xl-4 hidden-card">
                    <div class="fun-card">
                        <div class="fun-card-content">
                            <div class="fun-badge">Fun Fact</div>
                            <h3 class="fun-heading">
                                Rice paper is used in both Vietnamese spring rolls and traditional art scrolls.
                            </h3>
                            <p class="fun-text"><em>Eat it. Paint on it. Love it.</em></p>
                        </div>
                    </div>
                </div>

                <div class="col-12 col-md-6 col-xl-4 hidden-card">
                    <div class="fun-card">
                        <div class="fun-card-content">
                            <div class="fun-badge">Fun Fact</div>
                            <h3 class="fun-heading">
                                Throwing rice at weddings isn’t random — it’s a wish for abundance and fertility.
                            </h3>
                            <p class="fun-text"><em>Every toss is a tiny blessing.</em></p>
                        </div>
                    </div>
                </div>

                <div class="col-12 col-md-6 col-xl-4 hidden-card">
                    <div class="fun-card">
                        <div class="fun-card-content">
                            <div class="fun-badge">Fun Fact</div>
                            <h3 class="fun-heading">
                                Some luxury skincare brands now use rice powder in their products.
                            </h3>
                            <p class="fun-text"><em>Because good skin, like good food, starts with rice.</em></p>
                        </div>
                    </div>
                </div>

                <div class="col-12 col-md-6 col-xl-4 hidden-card">
                    <div class="fun-card">
                        <div class="fun-card-content">
                            <div class="fun-badge">Fun Fact</div>
                            <h3 class="fun-heading">
                                Rice straw becomes hats, mats, and paper after harvest.
                            </h3>
                            <p class="fun-text"><em>A masterclass in zero waste.</em></p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- <div class="text-center mt-4">
                <button class="fun-load-btn" id="loadMoreBtn">Show More</button>
            </div> -->
        </div>
    </section>


    <!-- Quiz Modal -->
    <div class="modal fade" id="quizModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content p-4">
                <div class="quiz-card">
                    <h5 id="quiz-question-main" class="mb-4"></h5>
                    <div id="quiz-options-main"></div>
                    <div class="d-flex justify-content-between align-items-center mt-4">
                        <button id="arrow-main" class="btn btn-outline-dark">
                            &larr;
                        </button>
                        <button id="next-btn-main" class="btn btn-dark">Next</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <section class="py-3 py-md-5">
        <div class="container">
            <div class="w-100 text-center">
                <h2 class="faq-title text-center mb-5" id="faqs">FAQ's</h2>
                <div class="accordion faq-accordion" id="faqAccordion">
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingOne">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                                A. What is the Rice Your Awareness Challenge?
                            </button>
                        </h2>
                        <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne"
                            data-bs-parent="#faqAccordion">
                            <div class="accordion-body">
                                A
                                <strong>30-days awareness and fitness movement by Daawat</strong>, inspiring India to
                                take part in
                                <strong>#OnlyRiceNovember</strong> challenge - to break myths
                                around rice, eat mindfully, and experience how it supports
                                health, energy, and balance.
                            </div>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingTwo">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                B. How do I participate?
                            </button>
                        </h2>
                        <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo"
                            data-bs-parent="#faqAccordion">
                            <div class="accordion-body">
                                Visit
                                <a href="https://www.daawat.com/rya" target="_blank">www.daawat.com/rya</a>
                                , choose your challenge duration
                                <strong>(7 / 14 / 21 / 30 days)</strong>, register with your
                                details, download your
                                <strong>Exclusive Expert-Crafted Meal Plan</strong>, and get
                                your <strong>Digital Badge</strong>. Start your journey, share
                                your meals, and invite friends to join
                                <strong>#OnlyRiceNovember</strong>.
                            </div>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingThree">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                C. Which hashtags should I use?
                            </button>
                        </h2>
                        <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree"
                            data-bs-parent="#faqAccordion">
                            <div class="accordion-body">
                                Use <strong>#RiceYourAwareness</strong> and
                                <strong>#OnlyRiceNovember</strong> to share your experience,
                                motivate others, and be part of this nationwide movement.
                            </div>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingFour">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                                D. Is this a weight-loss or fitness challenge?
                            </button>
                        </h2>
                        <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour"
                            data-bs-parent="#faqAccordion">
                            <div class="accordion-body">
                                It’s a
                                <strong>fitness-driven awareness movement</strong> designed to
                                help you feel more energetic, and confident about including
                                rice as part of a balanced, healthy lifestyle.
                            </div>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingFive">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
                                E. What if I can’t follow it daily?
                            </button>
                        </h2>
                        <div id="collapseFive" class="accordion-collapse collapse" aria-labelledby="headingFive"
                            data-bs-parent="#faqAccordion">
                            <div class="accordion-body">
                                No problem - <strong>#OnlyRiceNovember</strong> challenge is
                                flexible. Pick a shorter duration or include rice mindfully
                                whenever you can; every step counts toward a healthier, more
                                balanced you.
                            </div>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingSix">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#collapseSix" aria-expanded="false" aria-controls="collapseSix">
                                F. Are the Rice Diet Plans the same for everyone?
                            </button>
                        </h2>
                        <div id="collapseSix" class="accordion-collapse collapse" aria-labelledby="headingSix"
                            data-bs-parent="#faqAccordion">
                            <div class="accordion-body">
                                Not at all. There are
                                <strong>multiple Rice Diet Plans</strong> tailored to
                                different regions, preferences, and lifestyles - so everyone
                                can experience the goodness of rice in their own way.
                            </div>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingSeven">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#collapseSeven" aria-expanded="false" aria-controls="collapseSeven">
                                G. What results should I expect?
                            </button>
                        </h2>
                        <div id="collapseSeven" class="accordion-collapse collapse" aria-labelledby="headingSeven"
                            data-bs-parent="#faqAccordion">
                            <div class="accordion-body">
                                Better energy, improved digestion, and a renewed sense of
                                comfort and balance through mindful eating.
                            </div>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingEight">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#collapseEight" aria-expanded="false" aria-controls="collapseEight">
                                H. Will there be any gratification?
                            </button>
                        </h2>
                        <div id="collapseEight" class="accordion-collapse collapse" aria-labelledby="headingEight"
                            data-bs-parent="#faqAccordion">
                            <div class="accordion-body">
                                The real reward is the
                                <strong>feeling of well-being, energy, and positivity</strong>
                                that comes from reconnecting with rice and joining a
                                nationwide movement built on balance and awareness.
                            </div>
                        </div>
                    </div>

                    <!-- Add more items like D, E, F as in your image -->
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row w-100 gap-4 gap-md-0 mx-auto">
                <!-- <div class="col-12 col-md-6 col-lg-3 d-flex align-items-center justify-content-center">
                <img src="img/daawat-l.png" width="160" alt="">
            </div> -->
                <div
                    class="col-12 col-md-6 col-lg-6 d-flex align-items-center flex-wrap justify-content-md-start justify-content-center">
                    <span class="mb-2">An initiative by Daawat for #OnlyRiceNovember</span>
                    Copyright 2025 All Rights Reserved by Daawat
                </div>
                <!-- <div class="col-12 col-md-6 col-lg-4 d-flex align-items-center justify-content-center">

                </div> -->

                <div class="col-12 col-md-6 col-lg-6 d-flex align-items-center align-items-md-end flex-column">
                    <div class="social-icons1">
                        <a href="https://www.facebook.com/DaawatBasmatiOfficial/" style="text-decoration: none"
                            target="_blank"><i class="ti ti-brand-facebook"></i></a>
                        <!-- <a href="https://twitter.com" style="text-decoration: none;" target="_blank"><i
                                class="ti ti-brand-twitter"></i></a> -->
                        <a href="https://instagram.com/daawatofficial" style="text-decoration: none" target="_blank"><i
                                class="ti ti-brand-instagram"></i></a>
                        <a href="https://www.youtube.com/@DaawatTheFinest" style="text-decoration: none"
                            target="_blank"><i class="ti ti-brand-youtube"></i></a>
                    </div>
                    <a href="" style="text-decoration: none; color: white">
                        Terms and Conditions
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Floating buttons -->
    <div class="floating-buttons">
        <div class="scroll-top-container">
            <svg class="progress-ring" width="56" height="56" viewBox="0 0 56 56" preserveAspectRatio="xMidYMid meet">
                <defs>
                    <linearGradient id="ringGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                        <stop offset="0%" stop-color="#d28d00" />
                        <stop offset="50%" stop-color="#b48a2c" />
                        <stop offset="100%" stop-color="#a5885d" />
                    </linearGradient>
                </defs>
                <!-- background track -->
                <circle class="progress-ring__track" cx="28" cy="28" r="22" />
                <!-- animated progress -->
                <circle class="progress-ring__circle" cx="28" cy="28" r="22" />
            </svg>
            <button id="goTopBtn" title="Go to top">
                <i class="ti ti-chevron-up"></i>
            </button>
        </div>

        <div class="shop-rice-container">
            <button id="shopRiceBtn" class="shop-rice-btn" aria-expanded="false" title="Shop Daawat Rice">
                Shop Now
            </button>

            <div class="shop-options" role="menu" aria-hidden="true">
                <button class="shop-option amazon" role="menuitem" title="Buy on Amazon">Amazon</button>

                <button class="shop-option flipkart" role="menuitem" title="Buy on Flipkart">Flipkart</button>

                <!-- <button class="shop-option blinkit" role="menuitem" title="Buy on Blinkit">Blinkit</button> -->

                <button class="shop-option swiggy" role="menuitem" title="Buy on Swiggy">Swiggy</button>
            </div>
        </div>

    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script>
        // API Configuration - Dynamic Base URL based on environment
        const API_CONFIG = {
            // Determine base URL based on current window location
            BASE_URL: (() => {
                if (window.location.href.includes("http://13.201.26.193")) {
                    return "http://13.201.26.193:8080";
                } else if (window.location.href.includes("daawat.com")) {
                    return "https://www.daawat.com";
                } else {
                    return "http://localhost:8080";
                }
            })(),

            // API Endpoints
            ENDPOINTS: {
                REGISTER_CHALLENGER: "/api/challenger/register",
                VERIFY_OTP: "/api/challenger/verify",
                SUBMIT_CHALLENGE: "/api/challenger/submit",
            },
        };

        // Helper function to build full API URLs
        function getApiUrl(endpoint) {
            return API_CONFIG.BASE_URL + endpoint;
        }

        // CSRF Token Management
        let csrfToken = null;

        // Function to fetch CSRF token
        async function getCsrfToken() {
            try {
                const response = await fetch(getApiUrl("/api/csrf-token"), {
                    method: "GET",
                    credentials: "include", // Important for cookies
                    headers: {
                        Accept: "application/json",
                    },
                });

                if (response.ok) {
                    const data = await response.json();
                    csrfToken = data.csrfToken;
                    // console.log("✅ CSRF token fetched successfully");
                    return csrfToken;
                } else {
                    console.error("❌ Failed to fetch CSRF token:", response.status);
                    return null;
                }
            } catch (error) {
                console.error("❌ Error fetching CSRF token:", error);
                return null;
            }
        }

        // Enhanced fetch function with CSRF protection
        async function secureApiCall(url, options = {}) {
            // Ensure we have a CSRF token for POST requests
            if (options.method && options.method !== "GET" && !csrfToken) {
                await getCsrfToken();
            }

            // Add CSRF token to headers for non-GET requests
            if (options.method && options.method !== "GET" && csrfToken) {
                options.headers = {
                    ...options.headers,
                    "X-CSRF-Token": csrfToken,
                };
            }

            // Always include credentials for session cookies
            options.credentials = "include";

            return fetch(url, options);
        }

        // Function to add tracking iframe after successful OTP verification
        function addTrackingIframe(name, mobile) {
            try {
                // Remove any existing tracking iframe
                const existingIframe = document.getElementById("pixelcodeurl");
                if (existingIframe) {
                    existingIframe.remove();
                }

                // Create new tracking iframe with user data
                const iframe = document.createElement("iframe");
                iframe.src = `https://tracking.icubeswire.co/aff_a?offer_id=7333&goal_id=11031&adv_sub1=${encodeURIComponent(
                    name
                )}&adv_sub2=${encodeURIComponent(mobile)}`;
                iframe.width = "1";
                iframe.height = "1";
                iframe.id = "pixelcodeurl";
                iframe.style.display = "none";

                // Append to body
                document.body.appendChild(iframe);
            } catch (error) {
                console.error("Error adding tracking iframe:", error);
            }
        }

        // Function to add PDF download tracking iframe
        function addPDFTrackingIframe(name, mobile) {
            try {
                // Remove any existing PDF tracking iframe
                const existingIframe = document.getElementById("pdfPixelcodeurl");
                if (existingIframe) {
                    existingIframe.remove();
                }

                // Create new PDF tracking iframe with user data
                const iframe = document.createElement("iframe");
                iframe.src = `https://tracking.icubeswire.co/aff_a?offer_id=7333&goal_id=11032&adv_sub1=${encodeURIComponent(
                    name
                )}&adv_sub2=${encodeURIComponent(mobile)}`;
                iframe.width = "1";
                iframe.height = "1";
                iframe.id = "pdfPixelcodeurl";
                iframe.style.display = "none";

                // Append to body
                document.body.appendChild(iframe);
            } catch (error) {
                console.error("Error adding PDF tracking iframe:", error);
            }
        }

        // Test function for API endpoints (for debugging)
        window.testAPIs = {
            testRegister: async function () {
                try {
                    const response = await secureApiCall(
                        getApiUrl(API_CONFIG.ENDPOINTS.REGISTER_CHALLENGER),
                        {
                            method: "POST",
                            headers: {
                                accept: "application/json",
                                "Content-Type": "application/json",
                            },
                            body: JSON.stringify({
                                duration: "7 days",
                                name: "Test User",
                                mobile: "9999999999",
                                referal: document.referal,
                            }),
                        }
                    );
                    const result = await response.json();
                    return result;
                } catch (error) {
                    console.error("Register Test Error:", error);
                    return null;
                }
            },

            testVerify: async function (userId, otp = "1234") {
                try {
                    const response = await secureApiCall(
                        getApiUrl(API_CONFIG.ENDPOINTS.VERIFY_OTP),
                        {
                            method: "POST",
                            headers: {
                                accept: "application/json",
                                "Content-Type": "application/json",
                            },
                            body: JSON.stringify({
                                userId: userId,
                                otp: otp,
                            }),
                        }
                    );
                    const result = await response.json();
                    return result;
                } catch (error) {
                    console.error("Verify Test Error:", error);
                    return null;
                }
            },

            testSubmit: async function (userId = "68ecf1d723d4ade0dca9be9b") {
                try {
                    const response = await secureApiCall(
                        getApiUrl(API_CONFIG.ENDPOINTS.SUBMIT_CHALLENGE),
                        {
                            method: "POST",
                            headers: {
                                accept: "application/json",
                                "Content-Type": "application/json",
                            },
                            body: JSON.stringify({
                                userId: userId,
                                category: "Vegetarian",
                                subcategory: "Beginner",
                                duration: "7 days",
                                type: "Weight Loss",
                            }),
                        }
                    );
                    const result = await response.json();
                    return result;
                } catch (error) {
                    console.error("Submit Test Error:", error);
                    return null;
                }
            },
        };

        // Function to fetch progress data from API
        // async function fetchProgressData() {
        //   try {
        //     const response = await fetch(getApiUrl("/api/challenger/progress"), {
        //       method: "GET",
        //       credentials: "include", // Include cookies for session consistency
        //       headers: {
        //         accept: "application/json",
        //       },
        //     });
        //     if (response.ok) {
        //       const result = await response.json();
        //       return result.data;
        //     } else {
        //       console.error("Failed to fetch progress data:", response.status);
        //       return null;
        //     }
        //   } catch (error) {
        //     console.error("Error fetching progress data:", error);
        //     return null;
        //   }
        // }
    </script>

    <script>
        // 3D rotation (only runs on tablet & above)

        const ring = document.getElementById("ring");
        if (ring) {
            const cards = Array.from(ring.children);
            const N = cards.length;
            const radius = 3200;
            const step = 360 / N;

            // position cards evenly
            cards.forEach((card, i) => {
                const angle = step * i;
                card.style.transform = `rotateY(${angle}deg) translateZ(${radius}px)`;
            });

            let angle = 0;
            let paused = false;

            function rotate() {
                if (!paused) {
                    angle += 0.05; // speed control 0.02 means slow // 0.1 means fast
                    ring.style.transform = `rotateY(${angle}deg)`;
                }
                requestAnimationFrame(rotate);
            }
            rotate();

            cards.forEach((card) => {
                card.addEventListener("mouseenter", () => (paused = true));
                card.addEventListener("mouseleave", () => (paused = false));
            });
        }
    </script>

    <script>
        // Ensure modal comes after backdrop in DOM

        document.querySelectorAll(".modal").forEach((m) => {
            document.body.appendChild(m);
        });
    </script>

    <!-- share js  -->
    <script>
        // Attach listener to a parent element that exists in the DOM
        document.body.addEventListener("click", async (e) => {
            const shareBtn = e.target.closest("#shareBtn"); // works even if clicking child elements like <span> or <svg>
            if (!shareBtn) return; // exit if it's not a share button

            if (navigator.share) {
                try {
                    await navigator.share({
                        title: "I have taken #OnlyRiceNovember Challenge",
                        text: "I have taken #OnlyRiceNovember Challenge. Rice Your Awareness and Feel the Power of Rice",
                        url: "https://www.daawat.com/rya/",
                    });
                } catch (err) {
                    console.error("Share failed:", err.message);
                }
            } else {
                // Browser doesn't support native share
            }
        });
    </script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const cardCols = document.querySelectorAll("#fun-facts-row > div"); // selects each .col-12 col-md-6 col-lg-4
            const container = document.querySelector("#fun-facts .container");

            // Create the Show More / Show Less button
            const loadBtn = document.createElement("button");
            loadBtn.className = "fun-load-btn";
            loadBtn.textContent = "Show More";
            container.appendChild(loadBtn);

            let visibleCount = window.innerWidth <= 768 ? 4 : 6;
            const increment = window.innerWidth <= 768 ? 4 : 6;

            // Update which cards are visible
            function updateCards() {
                cardCols.forEach((col, index) => {
                    if (index < visibleCount) {
                        col.classList.remove("hidden-card");
                        setTimeout(() => col.classList.add("show"), 50);
                    } else {
                        col.classList.remove("show");
                        setTimeout(() => col.classList.add("hidden-card"), 300);
                    }
                });

                loadBtn.textContent =
                    visibleCount >= cardCols.length ? "Show Less" : "Show More";
            }

            // On button click
            loadBtn.addEventListener("click", () => {
                if (visibleCount >= cardCols.length) {
                    visibleCount = window.innerWidth <= 768 ? 4 : 6;
                } else {
                    visibleCount = Math.min(visibleCount + increment, cardCols.length);
                }
                updateCards();
            });

            // Initial setup
            updateCards();
        });
    </script>

    <script>
        // ===== FUNCTION TO HANDLE EACH MENU SEPARATELY =====
        function setupShareMenu(buttonId, menuSelector) {
            const button = document.getElementById(buttonId);
            const menu = document.querySelector(menuSelector);
            let hideTimeout;

            if (!button || !menu) return;

            button.addEventListener("mouseenter", () => {
                clearTimeout(hideTimeout);
                menu.style.display = "flex";
            });

            button.addEventListener("mouseleave", () => {
                hideTimeout = setTimeout(() => {
                    menu.style.display = "none";
                }, 500);
            });

            menu.addEventListener("mouseenter", () => {
                clearTimeout(hideTimeout);
                menu.style.display = "flex";
            });

            menu.addEventListener("mouseleave", () => {
                hideTimeout = setTimeout(() => {
                    menu.style.display = "none";
                }, 500);
            });
        }

        // Setup both share buttons separately
        setupShareMenu("shareBtnDesktop", ".share-menu");
        setupShareMenu("shareBtnDesktop2", ".share-menu1");
        setupShareMenu("shareBtnDesktop3", ".share-menu2");

        // ===== SOCIAL SHARE LINKS =====
        // ===== SOCIAL SHARE LINKS (with OG tag support) =====
        function setupSocialShare(fbId, linkedinId, twitterId) {
            const fbIcon = document.getElementById(fbId);
            const linkedinIcon = document.getElementById(linkedinId);
            const twitterIcon = document.getElementById(twitterId);

            const shareUrl = "https://www.daawat.com/rya/";
            const shareText =
                "Join the RYA movement by Daawat! Explore delicious rice recipes and rediscover your appetite.";
            const hashtags = "Daawat,RediscoverYourAppetite";

            // ✅ FACEBOOK — will read from OG tags, quote optional
            fbIcon?.addEventListener("click", (e) => {
                e.preventDefault();
                const fbShareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(
                    shareUrl
                )}&quote=${encodeURIComponent(shareText)}`;
                window.open(fbShareUrl, "_blank", "width=600,height=400");
            });

            // ✅ LINKEDIN — now only reads OG tags from the URL
            linkedinIcon?.addEventListener("click", (e) => {
                e.preventDefault();
                const linkedInShareUrl = `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(
                    shareUrl
                )}`;
                window.open(linkedInShareUrl, "_blank", "width=600,height=400");
            });

            // ✅ TWITTER (unchanged)
            twitterIcon?.addEventListener("click", (e) => {
                e.preventDefault();
                const twitterShareUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(
                    shareText
                )}&url=${encodeURIComponent(shareUrl)}&hashtags=${encodeURIComponent(
                    hashtags
                )}`;
                window.open(twitterShareUrl, "_blank", "width=600,height=400");
            });
        }

        setupSocialShare("shareFb", "shareLinkedin", "shareTwitter");
        setupSocialShare("shareFb2", "shareLinkedin2", "shareTwitter2");
        setupSocialShare("shareFb3", "shareLinkedin3", "shareTwitter3");
    </script>

    <script>
        let selectedCard = null;

        const dynamicCards = document.querySelectorAll(
            ".dynamic-challenge-options .challenge-card"
        );
        const takeBtn = document.getElementById("takeChallengeBtn");
        const dynamicModalEl = document.getElementById("dynamicChallengeModal");
        const dynamicModalImage = document.getElementById("dynamicModalImage");
        const dynamicShareBtn = document.getElementById("dynamicShareBtn");
        const dynamicCloseBtn = dynamicModalEl
            ? dynamicModalEl.querySelector(".custom-close")
            : null;

        // Initialize modal instance ONCE
        let dynamicModal = null;
        if (dynamicModalEl) {
            dynamicModal = new bootstrap.Modal(dynamicModalEl, {
                backdrop: true,
                keyboard: true,
            });
        }

        // Function to open challenge modal directly
        function openChallengeModal() {
            // Clear any selected card since we're opening directly
            selectedCard = null;

            // Clear previous error message
            const errorElement = document.getElementById("challengeSelectionError");
            if (errorElement) {
                errorElement.style.display = "none";
            }

            // Clear any active card selections
            dynamicCards.forEach((c) => c.classList.remove("active"));

            // Show modal directly
            if (dynamicModal) {
                dynamicModal.show();
            }
        }

        // Card selection logic
        dynamicCards.forEach((card) => {
            card.addEventListener("click", () => {
                // Remove previous selection
                dynamicCards.forEach((c) => c.classList.remove("active"));
                // Highlight current
                card.classList.add("active");
                selectedCard = card;

                // Hide error message when a card is selected
                const errorElement = document.getElementById(
                    "challengeSelectionError"
                );
                if (errorElement) {
                    errorElement.style.display = "none";
                }
            });
        });

        // Take the Challenge button
        takeBtn.addEventListener("click", (e) => {
            e.preventDefault(); // Prevent default form/button behavior

            // Clear previous error message
            const errorElement = document.getElementById("challengeSelectionError");
            if (errorElement) {
                errorElement.style.display = "none";
            }

            // Validate that a challenge duration is selected
            if (!selectedCard) {
                if (errorElement) {
                    errorElement.textContent =
                        "Please select a challenge duration before proceeding";
                    errorElement.style.display = "block";

                    // Scroll to the error message to make it visible
                    errorElement.scrollIntoView({
                        behavior: "smooth",
                        block: "center",
                    });
                }
                return; // Don't open modal if no card is selected
            }

            // Update modal background image
            const img = selectedCard
                ? selectedCard.getAttribute("data-image")
                : null;
            if (dynamicModalImage && img) {
                dynamicModalImage.style.backgroundImage = `url(${img})`;
            }

            // Update share button
            const shareLink = selectedCard.getAttribute("data-share");
            if (dynamicShareBtn) {
                dynamicShareBtn.onclick = () => {
                    if (navigator.share) {
                        navigator
                            .share({
                                title: "Check this out!",
                                url: shareLink,
                            })
                            .catch((err) => {
                                // Share failed silently
                            });
                    } else {
                        // Share not supported
                    }
                };
            } // Show modal
            dynamicModal.show();
        });

        // Close button explicitly hides modal
        dynamicCloseBtn.addEventListener("click", () => {
            dynamicModal.hide();
        });

        // Ensure overlay/backdrop removed when modal hidden
        if (dynamicModalEl) {
            dynamicModalEl.addEventListener("hidden.bs.modal", () => {
                document
                    .querySelectorAll(".modal-backdrop")
                    .forEach((b) => b.remove());
            });
        }
    </script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Initialize CSRF token on page load
            getCsrfToken().catch((error) => {
                console.warn(
                    "⚠️ Could not initialize CSRF token on page load:",
                    error
                );
            });

            let currentStep = 0;

            const quizCard = document.querySelector(".quiz-card");
            const questionEl = document.getElementById("quiz-question");
            const optionsEl = document.getElementById("quiz-options");
            const nextBtn = document.getElementById("next-btn");

            function loadStep(index) {
                if (!optionsEl) return;

                optionsEl.innerHTML = "";

                // ✅ STEP 0 — Name & Mobile + OTP
                if (index === 0) {
                    // Get selected challenge duration for display
                    let challengeText = "Challenge";
                    let selectedDuration = null; // No default selection

                    if (selectedCard) {
                        const duration = selectedCard.getAttribute("data-duration");
                        selectedDuration = duration;
                        const levelElement = selectedCard.querySelector("p");
                        const level = levelElement
                            ? levelElement.textContent.trim()
                            : "Beginner";
                        challengeText = `${duration.replace(
                            " days",
                            ""
                        )} Day Challenge (${level})`;
                    }

                    if (questionEl) {
                        questionEl.textContent = `Ready for the Challenge?`;
                    }
                    optionsEl.innerHTML = `
                <form id="userForm" class="d-flex flex-column gap-3">
                    <div class="mb-2">
                        <input type="text" class="form-control" id="name" placeholder="Enter your name" required />
                        <div class="text-danger small mt-1" id="nameError" style="display:none;"></div>
                    </div>
                    <div class="mb-2 phone-group">
                        <label for="mobile" class="visually-hidden">Mobile Number</label>
                        <div class="phone-input-wrapper" style="display: flex; gap: 8px;">
                            <select class="form-select country-code" id="countryCode" required style="max-width: 130px;">
                            <!-- Priority countries -->
                            <option value="+971">🇦🇪 +971</option>
                            <option value="+61">🇦🇺 +61</option>
                            <option value="+91" selected>🇮🇳 +91</option>

                            <!-- Other major countries -->
                            <option value="+1">🇺🇸 +1</option>
                            <option value="+44">🇬🇧 +44</option>
                            <option value="+1">🇨🇦 +1</option>
                            <option value="+49">🇩🇪 +49</option>
                            <option value="+33">🇫🇷 +33</option>
                            <option value="+81">🇯🇵 +81</option>
                            <option value="+65">🇸🇬 +65</option>
                            <option value="+60">🇲🇾 +60</option>
                            <option value="+62">🇮🇩 +62</option>
                            <option value="+63">🇵🇭 +63</option>
                            <option value="+974">🇶🇦 +974</option>
                            <option value="+966">🇸🇦 +966</option>
                            <option value="+852">🇭🇰 +852</option>
                            <option value="+86">🇨🇳 +86</option>
                            </select>

                            <input
                            type="tel"
                            class="form-control"
                            id="mobile"
                            placeholder="Enter mobile number"
                            required
                            style="flex: 1;"
                            />
                        </div>
                        <div class="text-danger small mt-1" id="mobileError" style="display:none;"></div>
                    </div>


                    <div class="mb-2">
                        <select class="form-select" id="duration" required>
                            <option value="" selected disabled>Select Challenge Duration</option>
                            <option value="7 days" ${selectedDuration === "7 days" ? "selected" : ""
                        }>7 Days Challenge</option>
                            <option value="14 days" ${selectedDuration === "14 days" ? "selected" : ""
                        }>14 Days Challenge</option>
                            <option value="21 days" ${selectedDuration === "21 days" ? "selected" : ""
                        }>21 Days Challenge</option>
                            <option value="30 days" ${selectedDuration === "30 days" ? "selected" : ""
                        }>30 Days Challenge</option>
                        </select>
                        <div class="text-danger small mt-1" id="durationError" style="display:none;"></div>
                    </div>
                    <div class="text-danger small mt-1" id="challengeError" style="display:none;"></div>
                    <div class="text-success small mt-1" id="successMessage" style="display:none;"></div>

                    <button type="button" class="btn btn-dark w-100" id="sendOtpBtn">Submit</button>

                    <div id="otpSection" style="display:none;">
                        <div class="mb-2">
                            <input type="text" class="form-control mt-3" id="otp" placeholder="Enter OTP" maxlength="6" />
                            <div class="text-danger small mt-1" id="otpError" style="display:none;"></div>
                        </div>
                        <button type="button" class="btn btn-success w-100 mt-2" id="verifyOtpBtn">Verify OTP</button>
                    </div>
                </form>
            `;

                    document
                        .getElementById("sendOtpBtn")
                        .addEventListener("click", async () => {
                            // Clear previous error messages
                            document.getElementById("nameError").style.display = "none";
                            document.getElementById("mobileError").style.display = "none";
                            document.getElementById("durationError").style.display = "none";
                            document.getElementById("challengeError").style.display =
                                "none";
                            document.getElementById("successMessage").style.display =
                                "none";

                            const name = document.getElementById("name").value.trim();
                            const mobile = document.getElementById("mobile").value.trim();
                            const duration = document.getElementById("duration").value;
                            const countryCode = document.getElementById("countryCode").value;

                            // Validate inputs with specific error messages
                            let hasError = false;

                            if (!name) {
                                document.getElementById("nameError").textContent =
                                    "Please enter your name";
                                document.getElementById("nameError").style.display = "block";
                                hasError = true;
                            }

                            if (!mobile) {
                                document.getElementById("mobileError").textContent =
                                    "Please enter your mobile number";
                                document.getElementById("mobileError").style.display =
                                    "block";
                                hasError = true;
                            } else {
                                let validMobile = false;
                                if (countryCode === "+971" || countryCode === "+61") {
                                    validMobile = /^\d{9,}$/.test(mobile);
                                    if (!validMobile) {
                                        document.getElementById("mobileError").textContent =
                                            "For " + countryCode + ", mobile number must be at least 9 digits";
                                        document.getElementById("mobileError").style.display = "block";
                                        hasError = true;
                                    }
                                } else {
                                    validMobile = /^\d{10}$/.test(mobile);
                                    if (!validMobile) {
                                        document.getElementById("mobileError").textContent =
                                            "Please enter a valid 10-digit mobile number";
                                        document.getElementById("mobileError").style.display = "block";
                                        hasError = true;
                                    }
                                }
                            }

                            if (!duration) {
                                document.getElementById("durationError").textContent =
                                    "Please select a challenge duration";
                                document.getElementById("durationError").style.display =
                                    "block";
                                hasError = true;
                            }

                            if (hasError) {
                                return;
                            }

                            // Use the selected duration from the form instead of selectedCard
                            // Get selected challenge duration
                            let durationValue = duration; // Use form value directly

                            // Show loading state
                            const sendOtpBtn = document.getElementById("sendOtpBtn");
                            const originalText = sendOtpBtn.textContent;
                            sendOtpBtn.textContent = "Registering...";
                            sendOtpBtn.disabled = true;

                            try {
                                // Log referrer value to console
                                console.log('Referrer:', document.referrer);
                                // Call the registration API using secure CSRF-protected function
                                const response = await secureApiCall(
                                    getApiUrl(API_CONFIG.ENDPOINTS.REGISTER_CHALLENGER),
                                    {
                                        method: "POST",
                                        headers: {
                                            accept: "application/json",
                                            "Content-Type": "application/json",
                                        },
                                        body: JSON.stringify({
                                            duration: durationValue,
                                            name: name,
                                            mobile: mobile,
                                            countryCode: countryCode,
                                            referrer: document.referrer,
                                        }),
                                    }
                                );

                                if (response.ok) {
                                    const result = await response.json();

                                    // Store userId globally for OTP verification
                                    const extractedUserId =
                                        result.data?._id ||
                                        result._id ||
                                        result.id ||
                                        result.userId;

                                    if (!extractedUserId) {
                                        console.error(
                                            "No valid userId found in registration response:",
                                            result
                                        );
                                        document.getElementById("challengeError").textContent =
                                            "Registration successful but missing user ID. Please try again.";
                                        document.getElementById("challengeError").style.display =
                                            "block";
                                        return;
                                    }

                                    window.userRegistrationData = {
                                        userId: extractedUserId,
                                        name: name,
                                        mobile: mobile,
                                        duration: durationValue,
                                    };

                                    // Also store in localStorage as backup
                                    localStorage.setItem(
                                        "userRegistrationData",
                                        JSON.stringify(window.userRegistrationData)
                                    );

                                    // Show success message
                                    document.getElementById("successMessage").textContent =
                                        "OTP sent to your number.";
                                    document.getElementById("successMessage").style.display =
                                        "block";

                                    document.getElementById("otpSection").style.display =
                                        "block";
                                } else {
                                    const errorData = await response.json().catch(() => ({}));
                                    console.error("Registration failed:", errorData);
                                    document.getElementById(
                                        "challengeError"
                                    ).textContent = `Registration failed: ${errorData.message || "Please try again later"
                                    }`;
                                    document.getElementById("challengeError").style.display =
                                        "block";
                                }
                            } catch (error) {
                                console.error("Network error:", error);
                                document.getElementById("challengeError").textContent =
                                    "Network error! Please check your connection and try again.";
                                document.getElementById("challengeError").style.display =
                                    "block";
                            } finally {
                                // Reset button state
                                sendOtpBtn.textContent = originalText;
                                sendOtpBtn.disabled = false;
                            }
                        });

                    document
                        .getElementById("verifyOtpBtn")
                        .addEventListener("click", async () => {
                            // Clear previous error messages
                            document.getElementById("otpError").style.display = "none";

                            const otp = document.getElementById("otp").value.trim();

                            // Validate OTP input
                                if (!otp) {
                                    document.getElementById("otpError").textContent =
                                        "Please enter the OTP";
                                    document.getElementById("otpError").style.display = "block";
                                    return;
                                }
                                // OTP must be a 6-digit number
                                if (!/^\d{6}$/.test(otp)) {
                                    document.getElementById("otpError").textContent =
                                        "OTP must be a 6-digit number.";
                                    document.getElementById("otpError").style.display = "block";
                                    return;
                                }

                            // Try to restore from localStorage if window data is missing
                            if (!window.userRegistrationData) {
                                try {
                                    const storedData = localStorage.getItem(
                                        "userRegistrationData"
                                    );
                                    if (storedData) {
                                        window.userRegistrationData = JSON.parse(storedData);
                                    }
                                } catch (e) {
                                    // Error restoring from localStorage
                                }
                            }

                            if (
                                !window.userRegistrationData ||
                                !window.userRegistrationData.userId
                            ) {
                                document.getElementById("otpError").textContent =
                                    "Registration data not found. Please register again.";
                                document.getElementById("otpError").style.display = "block";
                                return;
                            }

                            // Show loading state
                            const verifyOtpBtn = document.getElementById("verifyOtpBtn");
                            const originalText = verifyOtpBtn.textContent;
                            verifyOtpBtn.textContent = "Verifying...";
                            verifyOtpBtn.disabled = true;

                            try {
                                // Call the OTP verification API with CSRF protection
                                const response = await secureApiCall(
                                    getApiUrl(API_CONFIG.ENDPOINTS.VERIFY_OTP),
                                    {
                                        method: "POST",
                                        headers: {
                                            accept: "application/json",
                                            "Content-Type": "application/json",
                                        },
                                        body: JSON.stringify({
                                            userId: window.userRegistrationData.userId,
                                            otp: otp,
                                            countryCode: document.getElementById("countryCode").value,
                                        }),
                                    }
                                );

                                if (response.ok) {
                                    const result = await response.json();

                                    // Store verification result
                                    window.userRegistrationData.verified = true;
                                    window.userRegistrationData.verificationResult = result;

                                    // Show success message briefly
                                    document.getElementById("successMessage").textContent =
                                        "OTP verified successfully!";
                                    document.getElementById("successMessage").style.display =
                                        "block";

                                    // Add tracking iframe after successful OTP verification
                                    addTrackingIframe(
                                        window.userRegistrationData.name,
                                        window.userRegistrationData.mobile
                                    );

                                    // Proceed to next step after a short delay
                                    setTimeout(() => {
                                        currentStep = 1;
                                        loadStep(currentStep);
                                    }, 1000);
                                } else {
                                    const errorData = await response.json().catch(() => ({}));
                                    console.error("OTP verification failed:", errorData);
                                    document.getElementById("otpError").textContent = ` ${errorData.message || "Please try again."
                                        }`;
                                    document.getElementById("otpError").style.display = "block";
                                }
                            } catch (error) {
                                console.error(
                                    "Network error during OTP verification:",
                                    error
                                );
                                document.getElementById("otpError").textContent =
                                    "Network error! Please check your connection and try again.";
                                document.getElementById("otpError").style.display = "block";
                            } finally {
                                // Reset button state
                                verifyOtpBtn.textContent = originalText;
                                verifyOtpBtn.disabled = false;
                            }
                        });

                    nextBtn.style.display = "none";
                }

                // ✅ STEP 1 — Category & Subcategory
                if (index === 1) {
                    questionEl.textContent = "Choose Your Meal Preference";
                    optionsEl.innerHTML = `
                <div class="mb-3">
                    <select class="form-select" id="category">
                        <option selected disabled>Choose Meal Preference</option>
                        <option value="veg">Vegetarian</option>
                        <option value="veg-egg">Veg + Egg</option>
                        <option value="veg-meat">Veg + Meat</option>
                    </select>
                    <div class="text-danger small mt-1" id="categoryError" style="display:none;"></div>
                </div>
                <div class="mb-3">
                    <select class="form-select" id="subcategory" disabled>
                        <option selected>Choose Sub Category</option>
                    </select>
                    <div class="text-danger small mt-1" id="subcategoryError" style="display:none;"></div>
                </div>
                <button class="btn btn-dark w-100" id="continueBtn">Continue</button>
            `;

                    // Subcategories Data
                    const subcategories = {
                        veg: [
                            "Weight Loss Meal Plan",
                            "High Protein Meal Plan",
                            "North Indian Meal Plan",
                            "South Indian Meal Plan",
                            "Asian Meal Plan",
                            "Fusion Meal Plan",
                            "Maharashtra Meal Plan",
                            "Sattvikk Meal Plan",
                        ],
                        "veg-egg": [
                            "Weight Loss Meal Plan",
                            "High Protein Meal Plan",
                            "North Indian Meal Plan",
                            "South Indian Meal Plan",
                            "Asian Meal Plan",
                            "Fusion Meal Plan",
                            "Maharashtra Meal Plan",
                        ],
                        "veg-meat": [
                            "Weight Loss Meal Plan",
                            "High Protein Meal Plan",
                            "North Indian Meal Plan",
                            "South Indian Meal Plan",
                            "Asian Meal Plan",
                            "Fusion Meal Plan",
                            "Maharashtra Meal Plan",
                        ],
                    };

                    const categorySelect = document.getElementById("category");
                    const subcategorySelect = document.getElementById("subcategory");

                    categorySelect.addEventListener("change", (e) => {
                        const selected = e.target.value;
                        subcategorySelect.innerHTML = `<option selected>Select Sub Category (Optional)</option>`;
                        subcategorySelect.disabled = true;

                        if (subcategories[selected]) {
                            subcategories[selected].forEach((sub) => {
                                const opt = document.createElement("option");
                                opt.value = sub.toLowerCase().replace(/\s+/g, "-");
                                opt.textContent = sub;
                                subcategorySelect.appendChild(opt);
                            });
                            subcategorySelect.disabled = false;
                            subcategorySelect.style.opacity = "0";
                            setTimeout(() => {
                                subcategorySelect.style.transition = "opacity 0.3s";
                                subcategorySelect.style.opacity = "1";
                            }, 50);
                        }
                    });

                    document
                        .getElementById("continueBtn")
                        .addEventListener("click", async () => {
                            // Clear previous error messages
                            document.getElementById("categoryError").style.display = "none";
                            document.getElementById("subcategoryError").style.display =
                                "none";

                            let hasError = false;

                            if (
                                !categorySelect.value ||
                                categorySelect.value === "Choose Meal Preference"
                            ) {
                                document.getElementById("categoryError").textContent =
                                    "Please select a meal preference";
                                document.getElementById("categoryError").style.display =
                                    "block";
                                hasError = true;
                            }

                            if (
                                !subcategorySelect.value ||
                                subcategorySelect.value === "Choose Sub Category"
                            ) {
                                document.getElementById("subcategoryError").textContent =
                                    "Please select a sub category";
                                document.getElementById("subcategoryError").style.display =
                                    "block";
                                hasError = true;
                            }

                            if (hasError) {
                                return;
                            }

                            // Check if user registration data exists
                            if (
                                !window.userRegistrationData ||
                                !window.userRegistrationData.userId
                            ) {
                                document.getElementById("categoryError").textContent =
                                    "User registration data missing. Please restart the process.";
                                document.getElementById("categoryError").style.display =
                                    "block";
                                return;
                            }

                            // Show loading state
                            const continueBtn = document.getElementById("continueBtn");
                            const originalText = continueBtn.textContent;
                            continueBtn.textContent = "Submitting...";
                            continueBtn.disabled = true;

                            try {
                                // Map category values to API format
                                const categoryMapping = {
                                    veg: "Vegetarian",
                                    "veg-egg": "Veg + Egg",
                                    "veg-meat": "Veg + Meat",
                                };

                                // Extract subcategory from selected value (optional)
                                let subcategoryValue = "";

                                if (
                                    subcategorySelect.value &&
                                    subcategorySelect.selectedIndex > 0
                                ) {
                                    // Use the original text content instead of the lowercase-hyphenated value
                                    const subcategoryText =
                                        subcategorySelect.options[subcategorySelect.selectedIndex]
                                            .textContent;
                                    subcategoryValue = subcategoryText;
                                }

                                // Call the submit challenge API with CSRF protection
                                const response = await secureApiCall(
                                    getApiUrl(API_CONFIG.ENDPOINTS.SUBMIT_CHALLENGE),
                                    {
                                        method: "POST",
                                        headers: {
                                            accept: "application/json",
                                            "Content-Type": "application/json",
                                        },
                                        body: JSON.stringify({
                                            userId: window.userRegistrationData.userId,
                                            category:
                                                categoryMapping[categorySelect.value] ||
                                                categorySelect.value,
                                            subcategory: subcategoryValue,
                                            duration: window.userRegistrationData.duration,
                                            // type: type
                                        }),
                                    }
                                );

                                if (response.ok) {
                                    const result = await response.json();

                                    // Store meal preferences and submission result
                                    window.userRegistrationData.category = categorySelect.value;
                                    window.userRegistrationData.subcategory = subcategoryValue;
                                    window.userRegistrationData.submissionResult = result;

                                    // Download PDF if URL is provided in response
                                    if (
                                        result.data &&
                                        typeof result.data === "string" &&
                                        result.data.includes(".pdf")
                                    ) {
                                        const pdfUrl = result.data;
                                        const fileName = `Daawat-${window.userRegistrationData.duration.replace(
                                            " ",
                                            "-"
                                        )}-Challenge-Meal-Plan.pdf`;

                                        // Store PDF URL for later use
                                        window.userRegistrationData.pdfUrl = pdfUrl;

                                        // Add a short delay to ensure UI updates, then start download
                                        setTimeout(() => {
                                            // Create a hidden <a> tag to trigger the download
                                            const link = document.createElement("a");
                                            link.href = pdfUrl;
                                            link.download = fileName;
                                            link.target = "_blank"; // optional – opens in new tab if direct download fails
                                            document.body.appendChild(link);
                                            link.click();
                                            document.body.removeChild(link);

                                            // Add PDF download tracking iframe
                                            addPDFTrackingIframe(
                                                window.userRegistrationData.name,
                                                window.userRegistrationData.mobile
                                            );
                                        }, 1000);
                                    } else {
                                        console.warn(
                                            "No PDF URL found in response data:",
                                            result.data
                                        );
                                    }

                                    // Update localStorage
                                    localStorage.setItem(
                                        "userRegistrationData",
                                        JSON.stringify(window.userRegistrationData)
                                    );

                                    // Proceed to next step
                                    currentStep = 2;
                                    loadStep(currentStep);
                                } else {
                                    const errorData = await response.json().catch(() => ({}));
                                    console.error("Challenge submission failed:", errorData);
                                    document.getElementById(
                                        "categoryError"
                                    ).textContent = `Submission failed: ${errorData.message || "Please try again later"
                                    }`;
                                    document.getElementById("categoryError").style.display =
                                        "block";
                                }
                            } catch (error) {
                                console.error(
                                    "Network error during challenge submission:",
                                    error
                                );
                                document.getElementById("categoryError").textContent =
                                    "Network error! Please check your connection and try again.";
                                document.getElementById("categoryError").style.display =
                                    "block";
                            } finally {
                                // Reset button state
                                continueBtn.textContent = originalText;
                                continueBtn.disabled = false;
                            }
                        });

                    nextBtn.style.display = "none";
                }

                // ✅ STEP 3 — Final Congratulations
                if (index === 2) {
                    finishQuiz();
                }
            }

            function animateQuestionChange(callback) {
                quizCard.classList.add("fade-out");
                quizCard.addEventListener("animationend", function handler() {
                    quizCard.classList.remove("fade-out");
                    callback();
                    quizCard.classList.add("fade-in");
                    quizCard.addEventListener("animationend", function innerHandler() {
                        quizCard.classList.remove("fade-in");
                        quizCard.removeEventListener("animationend", innerHandler);
                    });
                    quizCard.removeEventListener("animationend", handler);
                });
            }

            function finishQuiz() {
                // Determine badge image based on duration
                let badgeImage = "img/bronze.png"; // default
                if (
                    window.userRegistrationData &&
                    window.userRegistrationData.duration
                ) {
                    const duration = window.userRegistrationData.duration;
                    if (duration === "7 days") {
                        badgeImage = "img/bronze.png";
                    } else if (duration === "14 days") {
                        badgeImage = "img/silver.png";
                    } else if (duration === "21 days") {
                        badgeImage = "img/gold.png";
                    } else if (duration === "30 days") {
                        badgeImage = "img/diamond.png";
                    }
                }

                animateQuestionChange(() => {
                    questionEl.textContent = "";
                    optionsEl.innerHTML = `
                        <div class="d-flex justify-content-center flex-column align-items-center text-center gap-4 position-relative">
                        
                        <!-- Thank You Message -->
                        <div class="thank-you-message">
                            <h4 class="mb-3">Congratulations on joining <strong class="highlight-line">#OnlyRiceNovember</strong> challenge.</h4>
                            <p class="mb-0">
                                Your meal plan has been sent to your registered WhatsApp number.</p>
                            <p class="mb-0">
                                Complete your <span class="highlight-line">${window.userRegistrationData.duration
                        } journey</span> to earn your <span class="highlight-line">Badge of Honour</span>.
                            </p>
                        </div>

                        <!-- MOBILE SHARE BUTTON -->
                        <button class="animated-button btn d-flex d-md-none" id="shareBtn">
                            <svg viewBox="0 0 24 24" class="arr-2" xmlns="http://www.w3.org/2000/svg">
                            <path d="M16.1716 10.9999L10.8076 5.63589L12.2218 4.22168L20 11.9999L12.2218 19.778L10.8076 18.3638L16.1716 12.9999H4V10.9999H16.1716Z"></path>
                            </svg>
                            <span class="text">Share</span>
                            <span class="circle"></span>
                            <svg viewBox="0 0 24 24" class="arr-1" xmlns="http://www.w3.org/2000/svg">
                            <path d="M16.1716 10.9999L10.8076 5.63589L12.2218 4.22168L20 11.9999L12.2218 19.778L10.8076 18.3638L16.1716 12.9999H4V10.9999H16.1716Z"></path>
                            </svg>
                        </button>

                        <!-- DESKTOP SHARE BUTTON #2 (Optional) -->
                        <button class="animated-button btn d-none d-md-flex modal-btn" id="shareBtnDesktop3">
                            <svg viewBox="0 0 24 24" class="arr-2" xmlns="http://www.w3.org/2000/svg">
                            <path d="M16.1716 10.9999L10.8076 5.63589L12.2218 4.22168L20 11.9999L12.2218 19.778L10.8076 18.3638L16.1716 12.9999H4V10.9999H16.1716Z"></path>
                            </svg>
                            <span class="text">Share</span>
                            <span class="circle"></span>
                            <svg viewBox="0 0 24 24" class="arr-1" xmlns="http://www.w3.org/2000/svg">
                            <path d="M16.1716 10.9999L10.8076 5.63589L12.2218 4.22168L20 11.9999L12.2218 19.778L10.8076 18.3638L16.1716 12.9999H4V10.9999H16.1716Z"></path>
                            </svg>
                        </button>
                        
                            <div class="share-menu share-menu2">
                                <a href="#" class="share-icon" id="shareFb3"><i
                                                class="ti ti-brand-facebook"></i></a>
                                        <a href="#" class="share-icon" id="shareLinkedin3"><i
                                                class="ti ti-brand-linkedin"></i></a>
                                        <a href="#" class="share-icon" id="shareTwitter3"><i
                                                class="ti ti-brand-twitter"></i></a>
                            </div>

                            <div class="thank-you-divider"></div>

                        <p class="mt-0">
                            Your diet plan download should start automatically. If it doesn’t,
                            <a href="${window.userRegistrationData?.pdfUrl ||
                        "img/sample-local-pdf.pdf"
                        }" 
                            download="Daawat-${window.userRegistrationData?.duration?.replace(
                            " ",
                            "-"
                        ) || "Rice"
                        }-Challenge-Meal-Plan.pdf"
                            target="_blank" id="manualDownloadLink"
                            style="color:#e74c3c;font-weight:bold;text-decoration:underline;">
                            click here
                            </a> to download.
                        </p>
                        </div>
                    `;
                    setupShareMenu("shareBtnDesktop3", ".share-menu2");
                    setupSocialShare("shareFb3", "shareLinkedin3", "shareTwitter3");

                    nextBtn.style.display = "none";
                });
            }

            // Modal initialization
            const quizModalEl = document.getElementById("dynamicChallengeModal");
            quizModalEl.addEventListener("shown.bs.modal", () => {
                currentStep = 0;
                loadStep(currentStep);
            });
        });
    </script>

    <script>
        const riceSlider = new Swiper(".riceMythSlider", {
            slidesPerView: 2,
            spaceBetween: 30,
            loop: true,
            autoplay: {
                delay: 3000,
                disableOnInteraction: false,
            },
            navigation: {
                nextEl: ".riceMythNext",
                prevEl: ".riceMythPrev",
            },
            breakpoints: {
                0: { slidesPerView: 1 },
                768: { slidesPerView: 2 },
            },
        });

        // Click handling
        document.querySelectorAll(".riceMythSlide").forEach((slide) => {
            slide.addEventListener("click", () => {
                const mythType = slide.getAttribute("data-myth");
                // 👇 Add your custom click action here
                // e.g., open modal, navigate, fetch data, etc.
            });
        });
    </script>

    <script>
        // --- UNIFIED COUNTER LOGIC FOR CHALLENGER & ENGAGEMENT ---
        function FlipDigit1(value) {
            var parent = document.createElement("span");
            parent.className = "flip-clock__wrapper1";
            var el = document.createElement("span");
            el.className = "flip-clock__piece m-0";
            el.innerHTML =
                '<b class="flip-clock__card card1">' +
                '<b class="card__top"></b>' +
                '<b class="card__bottom"></b>' +
                '<b class="card__back"><b class="card__bottom"></b></b>' +
                "</b>";
            parent.appendChild(el);
            this.el = parent;
            this.piece = el;
            this.top = el.querySelector(".card__top");
            this.bottom = el.querySelector(".card__bottom");
            this.back = el.querySelector(".card__back");
            this.backBottom = el.querySelector(".card__back .card__bottom");
            this.currentValue = "";
            this.update(value);
        }
        FlipDigit1.prototype.update = function (val) {
            val = val.toString();
            if (val !== this.currentValue) {
                this.back.setAttribute("data-value", this.currentValue);
                this.bottom.setAttribute("data-value", this.currentValue);
                this.currentValue = val;
                this.top.textContent = val;
                this.backBottom.setAttribute("data-value", val);
                this.el.classList.remove("flip");
                void this.el.offsetWidth;
                this.el.classList.add("flip");
            }
        };
        function FlipCounter1(container, startValue = 1) {
            this.container = container;
            this.value = startValue;
            this.digits = [];
            this.render();
        }
        FlipCounter1.prototype.render = function () {
            this.container.innerHTML = "";
            var str = this.value.toString();
            this.digits = [];
            for (var i = 0; i < str.length; i++) {
                var digit = new FlipDigit1(str[i]);
                this.container.appendChild(digit.el);
                this.digits.push(digit);
            }
        };
        FlipCounter1.prototype.update = function () {
            var str = this.value.toString();
            if (str.length > this.digits.length) {
                this.render();
            } else {
                for (var i = 0; i < this.digits.length; i++) {
                    var digitIndex = str.length - this.digits.length + i;
                    var val = digitIndex >= 0 ? str[digitIndex] : "0";
                    this.digits[i].update(val);
                }
            }
        };
        FlipCounter1.prototype.setValue = function (newValue) {
            this.value = newValue;
            this.update();
        };
        FlipCounter1.prototype.animateFromTo = function (fromValue, toValue, callback) {
            var self = this;
            var currentVal = fromValue;
            var targetVal = toValue;
            if (this.animationInterval) {
                clearInterval(this.animationInterval);
            }
            this.setValue(currentVal);
            if (currentVal === targetVal) {
                if (callback) callback();
                return;
            }
            var difference = Math.abs(targetVal - currentVal);
            var increment = currentVal < targetVal ? 1 : -1;
            var speed = difference > 100 ? 20 : difference > 50 ? 40 : 100;
            this.animationInterval = setInterval(function () {
                currentVal += increment;
                self.setValue(currentVal);
                if (currentVal === targetVal) {
                    clearInterval(self.animationInterval);
                    self.animationInterval = null;
                    if (callback) callback();
                }
            }, speed);
        };

        function FlipDigit2(value) {
            var parent = document.createElement("span");
            parent.className = "flip-clock__wrapper";
            var el = document.createElement("span");
            el.className = "flip-clock__piece m-0";
            el.innerHTML =
                '<b class="flip-clock__card card2">' +
                '<b class="card__top2"></b>' +
                '<b class="card__bottom2"></b>' +
                '<b class="card__back2"><b class="card__bottom2"></b></b>' +
                "</b>";
            parent.appendChild(el);
            this.el = parent;
            this.piece = el;
            this.top = el.querySelector(".card__top2");
            this.bottom = el.querySelector(".card__bottom2");
            this.back = el.querySelector(".card__back2");
            this.backBottom = el.querySelector(".card__back2 .card__bottom2");
            this.currentValue = "";
            this.update(value);
        }
        FlipDigit2.prototype.update = function (val) {
            val = val.toString();
            if (val !== this.currentValue) {
                this.back.setAttribute("data-value", this.currentValue);
                this.bottom.setAttribute("data-value", this.currentValue);
                this.currentValue = val;
                this.top.textContent = val;
                this.backBottom.setAttribute("data-value", val);
                this.el.classList.remove("flip2");
                void this.el.offsetWidth;
                this.el.classList.add("flip2");
            }
        };
        function FlipCounter2(container, startValue = 1) {
            this.container = container;
            this.value = startValue;
            this.digits = [];
            this.render();
        }
        FlipCounter2.prototype.render = function () {
            this.container.innerHTML = "";
            var str = this.value.toString();
            this.digits = [];
            for (var i = 0; i < str.length; i++) {
                var digit = new FlipDigit2(str[i]);
                this.container.appendChild(digit.el);
                this.digits.push(digit);
            }
        };
        FlipCounter2.prototype.update = function () {
            var str = this.value.toString();
            if (str.length > this.digits.length) {
                this.render();
            } else {
                for (var i = 0; i < this.digits.length; i++) {
                    var digitIndex = str.length - this.digits.length + i;
                    var val = digitIndex >= 0 ? str[digitIndex] : "0";
                    this.digits[i].update(val);
                }
            }
        };
        FlipCounter2.prototype.setValue = function (newValue) {
            this.value = newValue;
            this.update();
        };
        FlipCounter2.prototype.animateFromTo = function (fromValue, toValue, callback) {
            var self = this;
            var currentVal = fromValue;
            var targetVal = toValue;
            if (this.animationInterval) {
                clearInterval(this.animationInterval);
            }
            this.setValue(currentVal);
            if (currentVal === targetVal) {
                if (callback) callback();
                return;
            }
            var difference = Math.abs(targetVal - currentVal);
            var increment = currentVal < targetVal ? 1 : -1;
            var speed = difference > 100 ? 20 : difference > 50 ? 40 : 100;
            this.animationInterval = setInterval(function () {
                currentVal += increment;
                self.setValue(currentVal);
                if (currentVal === targetVal) {
                    clearInterval(self.animationInterval);
                    self.animationInterval = null;
                    if (callback) callback();
                }
            }, speed);
        };

        // --- API-driven counter logic ---
        var counter1 = new FlipCounter1(document.getElementById("countdown1"), 0);
        var counter2 = new FlipCounter2(document.getElementById("countdown2"), 0);
        let isAnimating = false;
        let animationTimeout = null;
        let currentValues = {
            challengerProgress: 0,
            erProgress: 0,
        };

        async function updateCountersFromAPI() {
            try {
                const response = await fetch(getApiUrl("/api/challenger/progress"), {
                    method: "GET",
                    credentials: "include",
                    headers: { Accept: "application/json" },
                });
                if (response.ok) {
                    const result = await response.json();
                    const data = result.data;
                    // challengerProgress -> countdown1
                    // erProgress -> countdown2
                    if (data.challengerProgress) {
                        const prevVal = currentValues.challengerProgress;
                        const currVal = data.challengerProgress.currentValue || 0;
                        if (currVal !== prevVal) {
                            counter1.animateFromTo(prevVal, currVal, () => {
                                isAnimating = false;
                            });
                            currentValues.challengerProgress = currVal;
                            isAnimating = true;
                        }
                    }
                    if (data.erProgress) {
                        const prevVal = currentValues.erProgress;
                        const currVal = data.erProgress.currentValue || 0;
                        if (currVal !== prevVal) {
                            counter2.animateFromTo(prevVal, currVal, () => {
                                isAnimating = false;
                            });
                            currentValues.erProgress = currVal;
                            isAnimating = true;
                        }
                    }
                } else {
                    console.error("Failed to fetch progress data:", response.status);
                }
            } catch (error) {
                console.error("Error fetching progress data:", error);
            }
        }


        function startCounterPolling() {
            (async function () {
                try {
                    const response = await fetch(getApiUrl("/api/challenger/progress"), {
                        method: "GET",
                        credentials: "include",
                        headers: { Accept: "application/json" },
                    });
                    if (response.ok) {
                        const result = await response.json();
                        const data = result.data;
                        // Set counters to previousValue and animate to currentValue on initial load
                        if (data.challengerProgress) {
                            const prevVal = data.challengerProgress.previousValue || 0;
                            const currVal = data.challengerProgress.currentValue || 0;
                            counter1.setValue(prevVal);
                            if (currVal !== prevVal) {
                                counter1.animateFromTo(prevVal, currVal, () => {
                                    currentValues.challengerProgress = currVal;
                                });
                            } else {
                                currentValues.challengerProgress = currVal;
                            }
                        }
                        if (data.erProgress) {
                            const prevVal = data.erProgress.previousValue || 0;
                            const currVal = data.erProgress.currentValue || 0;
                            counter2.setValue(prevVal);
                            if (currVal !== prevVal) {
                                counter2.animateFromTo(prevVal, currVal, () => {
                                    currentValues.erProgress = currVal;
                                });
                            } else {
                                currentValues.erProgress = currVal;
                            }
                        }
                        // Now start polling for updates ONLY after successful response
                        animationTimeout = setInterval(updateCountersFromAPI, 30000);
                    }
                } catch (error) {
                    // fallback: set counters to 0
                    counter1.setValue(0);
                    counter2.setValue(0);
                    currentValues.challengerProgress = 0;
                    currentValues.erProgress = 0;
                }
            })();
        }

        document.addEventListener("DOMContentLoaded", function () {
            startCounterPolling();
        });

        window.addEventListener("beforeunload", function () {
            if (animationTimeout) {
                clearInterval(animationTimeout);
            }
            if (counter1.animationInterval) {
                clearInterval(counter1.animationInterval);
            }
            if (counter2.animationInterval) {
                clearInterval(counter2.animationInterval);
            }
        });
    </script>


    <!-- static starts  -->
    <!-- <script>
        // Make countdown2 (counter2) use erProgress from API and animate like challenges taken
        function FlipDigit3(value) {
            var parent = document.createElement("span");
            parent.className = "flip-clock__wrapper";
            var el = document.createElement("span");
            el.className = "flip-clock__piece m-0";
            el.innerHTML =
                '<b class="flip-clock__card card2">' +
                '<b class="card__top2"></b>' +
                '<b class="card__bottom2"></b>' +
                '<b class="card__back2"><b class="card__bottom2"></b></b>' +
                "</b>";
            parent.appendChild(el);
            this.el = parent;
            this.piece = el;
            this.top = el.querySelector(".card__top2");
            this.bottom = el.querySelector(".card__bottom2");
            this.back = el.querySelector(".card__back2");
            this.backBottom = el.querySelector(".card__back2 .card__bottom2");
            this.currentValue = "";
            this.update(value);
        }

        FlipDigit3.prototype.update = function (val) {
            val = val.toString();
            if (val !== this.currentValue) {
                this.back.setAttribute("data-value", this.currentValue);
                this.bottom.setAttribute("data-value", this.currentValue);
                this.currentValue = val;
                this.top.textContent = val;
                this.backBottom.setAttribute("data-value", val);
                this.el.classList.remove("flip2");
                void this.el.offsetWidth;
                this.el.classList.add("flip2");
            }
        };

        function FlipCounter3(container, startValue = 1) {
            this.container = container;
            this.value = startValue;
            this.digits = [];
            this.render();
            // No auto-increment, will be updated via API
        }

        FlipCounter3.prototype.render = function () {
            this.container.innerHTML = "";
            var str = this.value.toString();
            this.digits = [];
            for (var i = 0; i < str.length; i++) {
                var digit = new FlipDigit3(str[i]);
                this.container.appendChild(digit.el);
                this.digits.push(digit);
            }
        };

        FlipCounter3.prototype.update = function () {
            var str = this.value.toString();
            if (str.length > this.digits.length) {
                this.render();
            } else {
                for (var i = 0; i < this.digits.length; i++) {
                    var digitIndex = str.length - this.digits.length + i;
                    var val = digitIndex >= 0 ? str[digitIndex] : "0";
                    this.digits[i].update(val);
                }
            }
        };

        FlipCounter3.prototype.setValue = function (newValue) {
            this.value = newValue;
            try {
                const response = await fetch(getApiUrl("/api/challenger/progress"), {
                    method: "GET",
                    credentials: "include",
                    headers: { Accept: "application/json" },
                });
                if (response.ok) {
                    const result = await response.json();
                    const data = result.data;
                    // challengerProgress -> countdown1
                    // erProgress -> countdown2
                    if (data.challengerProgress) {
                        const prevVal = currentValues.challengerProgress;
                        const currVal = data.challengerProgress.currentValue || 0;
                        if (currVal !== prevVal) {
                            counter1.animateFromTo(prevVal, currVal, () => {
                                currentValues.challengerProgress = currVal;
                            });
                        }
                    }
                    if (data.erProgress) {
                        const prevVal = currentValues.erProgress;
                        const currVal = data.erProgress.currentValue || 0;
                        if (currVal !== prevVal) {
                            counter2.animateFromTo(prevVal, currVal, () => {
                                currentValues.erProgress = currVal;
                            });
                        }
                    }
                } else {
                    console.error("Failed to fetch progress data:", response.status);
                }
            } catch (error) {
                console.error("Error fetching progress data:", error);
            }
            let currentErProgress = 0;

            async function initializeCounter2() {
                try {
                    const progressData = await fetchProgressData();
                    if (progressData && progressData.erProgress) {
                        const prevVal = progressData.erProgress.previousValue || 0;
                        const currVal = progressData.erProgress.currentValue || 0;
                        currentErProgress = currVal;
                        counter2.animateFromTo(prevVal, currVal, () => {
                            isAnimating2 = false;
                            isInitialized2 = true;
                            animationTimeout2 = setInterval(checkForUpdates2, 10000);
                        });
                        isAnimating2 = true;
                    } else {
                        counter2.setValue(0);
                        currentErProgress = 0;
                        isInitialized2 = true;
                        animationTimeout2 = setInterval(checkForUpdates2, 10000);
                    }
                } catch (error) {
                    counter2.setValue(0);
                    currentErProgress = 0;
                    isInitialized2 = true;
                    animationTimeout2 = setInterval(checkForUpdates2, 10000);
                }
            }

            async function checkForUpdates2() {
                if (isAnimating2) return;
                try {
                    const progressData = await fetchProgressData();
                    if (progressData && progressData.erProgress) {
                        const newVal = progressData.erProgress.currentValue || 0;
                        if (newVal !== currentErProgress) {
                            const prevVal = currentErProgress;
                            currentErProgress = newVal;
                            isAnimating2 = true;
                            counter2.animateFromTo(prevVal, newVal, () => {
                                isAnimating2 = false;
                            });
                        }
                    }
                } catch (error) {
                    // Do nothing, will retry
                }
            }

            document.addEventListener("DOMContentLoaded", function () {
                initializeCounter2();
            });

            window.addEventListener("beforeunload", function () {
                if (animationTimeout2) {
                    clearInterval(animationTimeout2);
                }
                if (counter2.animationInterval) {
                    clearInterval(counter2.animationInterval);
                }
            });
    </script> -->

    <script>
        function toggleMenu() {
            document.getElementById("navMenu").classList.toggle("active");
            document.getElementById("menuOverlay").classList.toggle("active");
            document.querySelector(".hamburger").classList.toggle("open");
        }
    </script>

    <script>
        const goTopBtn = document.getElementById("goTopBtn");
        const circle = document.querySelector(".progress-ring__circle");
        const radius = circle.r.baseVal.value;
        const circumference = 2 * Math.PI * radius;

        circle.style.strokeDasharray = `${circumference} ${circumference}`;
        circle.style.strokeDashoffset = circumference;

        // Scroll progress update
        window.addEventListener("scroll", () => {
            const scrollTop = window.scrollY;
            const docHeight = document.body.scrollHeight - window.innerHeight;
            const scrollPercent = scrollTop / docHeight;
            const offset = circumference - scrollPercent * circumference;
            circle.style.strokeDashoffset = offset;
        });

        // Scroll to top animation
        goTopBtn.addEventListener("click", () => {
            const scrollDuration = 700;
            const start = window.scrollY;
            const startTime = performance.now();

            function scrollAnimation(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / scrollDuration, 1);
                window.scrollTo(0, start * (1 - progress));
                // reverse circle as we scroll up
                const offset = circumference * progress;
                circle.style.strokeDashoffset = offset;
                if (progress < 1) requestAnimationFrame(scrollAnimation);
            }

            requestAnimationFrame(scrollAnimation);
        });

    </script>

    <script>
        (function () {
            const shopRiceBtn = document.getElementById("shopRiceBtn");
            const shopOptions = document.querySelector(".shop-options");
            const amazonBtn = document.querySelector(".shop-option.amazon");
            const flipkartBtn = document.querySelector(".shop-option.flipkart");
            // const blinkitBtn = document.querySelector(".shop-option.blinkit");
            const swiggyBtn = document.querySelector(".shop-option.swiggy");

            // Links — replace with exact company pages if you have them
            const AMAZON_URL = "https://www.amazon.in/stores/Daawat/page/4F50B176-6702-4AC2-B9A2-0CABE8AE6204";

            const FLIPKART_URL = "https://www.flipkart.com/eat/~cs-4fvhvodnle/pr?sid=eat&marketplace=HYPERLOCAL&collection-tab-name=Daawat&utm_source=fk_dsp&utm_campaign=mintues_Food-Products_fkg91115&utm_adgroup=Facebook&utm_advertiser=FKAds&utm_medium=email";

            // const BLINKIT_URL = "https://blinkit.com/s/?q=daawat%20rice";

            const SWIGGY_URL = "https://www.swiggy.com/stores/instamart/collection-listing?collectionId=285563&custom_back=true&utm_campaign=IM_Brandverse_Daawat_Meta_Redirect&utm_medium=cpc&utm_source=facebook_ads";

            // Desktop click: open Amazon directly (keeps previous behavior)
            shopRiceBtn.addEventListener("click", (e) => {
                if (window.matchMedia("(hover: none)").matches) {
                    // mobile — toggle
                    e.stopPropagation();
                    shopOptions.classList.toggle("active");
                    const expanded = shopOptions.classList.contains("active");
                    shopRiceBtn.setAttribute("aria-expanded", expanded ? "true" : "false");
                    shopOptions.setAttribute("aria-hidden", expanded ? "false" : "true");
                } else {
                    // desktop click: open amazon tab
                    window.open("#", "_top");
                }
            });

            // Buttons open respective links
            amazonBtn.addEventListener("click", () => window.open(AMAZON_URL, "_blank"));
            flipkartBtn.addEventListener("click", () => window.open(FLIPKART_URL, "_blank"));
            // blinkitBtn.addEventListener("click", () => window.open(BLINKIT_URL, "_blank"));
            swiggyBtn.addEventListener("click", () => window.open(SWIGGY_URL, "_blank"));

            // Close on outside click (mobile toggle)
            document.addEventListener("click", (e) => {
                if (!document.querySelector(".shop-rice-container").contains(e.target)) {
                    shopOptions.classList.remove("active");
                    shopRiceBtn.setAttribute("aria-expanded", "false");
                    shopOptions.setAttribute("aria-hidden", "true");
                }
            });

            // keyboard accessibility: close on Escape
            document.addEventListener("keyup", (e) => {
                if (e.key === "Escape") {
                    shopOptions.classList.remove("active");
                    shopRiceBtn.setAttribute("aria-expanded", "false");
                    shopOptions.setAttribute("aria-hidden", "true");
                }
            });

            // Optional: ensure dropdown is visible when using keyboard focus
            shopRiceBtn.addEventListener("focus", () => {
                if (window.matchMedia("(hover: hover)").matches) {
                    // don't force-open for mouse-first mobile
                    document.querySelector(".shop-rice-container").classList.add("keyboard-focused");
                }
            });
        })();
    </script>

    <script>
        (function () {
            const floatingButtons = document.querySelector(".floating-buttons");

            function toggleFloatingButtons() {
                const scrolledPast40vh = window.scrollY > window.innerHeight * 0.4;

                if (scrolledPast40vh) {
                    floatingButtons.classList.add("visible");
                } else {
                    floatingButtons.classList.remove("visible");
                }
            }

            window.addEventListener("scroll", toggleFloatingButtons);
            toggleFloatingButtons(); // initial check on load
        })();
    </script>


    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-C9SF15VYGN"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() {
            dataLayer.push(arguments);
        }
        gtag("js", new Date());

        gtag("config", "G-C9SF15VYGN");
    </script>

    <!-- Meta Pixel Code -->
    <script>
        !(function (f, b, e, v, n, t, s) {
            if (f.fbq) return;
            n = f.fbq = function () {
                n.callMethod
                    ? n.callMethod.apply(n, arguments)
                    : n.queue.push(arguments);
            };
            if (!f._fbq) f._fbq = n;
            n.push = n;
            n.loaded = !0;
            n.version = "2.0";
            n.queue = [];
            t = b.createElement(e);
            t.async = !0;
            t.src = v;
            s = b.getElementsByTagName(e)[0];
            s.parentNode.insertBefore(t, s);
        })(
            window,
            document,
            "script",
            "https://connect.facebook.net/en_US/fbevents.js"
        );
        fbq("init", "1379815800530745");
        fbq("track", "PageView");
    </script>
    <noscript><img height="1" width="1" style="display: none"
            src="https://www.facebook.com/tr?id=1379815800530745&ev=PageView&noscript=1" /></noscript>
    <!-- End Meta Pixel Code -->

    <!-- new event snippit -->
    <!-- Google tag (gtag.js) event - delayed navigation helper -->
    <script>
        // Helper function to delay opening a URL until a gtag event is sent.
        // Call it in response to an action that should navigate to a URL.
        function gtagSendEvent(url) {
            var callback = function () {
                if (typeof url === "string") {
                    window.location = url;
                }
            };
            gtag("event", "form_start", {
                event_callback: callback,
                event_timeout: 2000,
                // <event_parameters>
            });
            return false;
        }
    </script>
</body>

</html>