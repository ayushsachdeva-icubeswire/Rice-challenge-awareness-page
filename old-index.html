<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Daawat</title>
    <link
      rel="shortcut icon"
      href="img/1new-daawat-logo.png"
      type="image/x-icon"
    />
    <!-- Bootstrap 5 -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Animate.css for fade-in -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
      rel="stylesheet"
    />

    <!-- Tabler Icons CDN -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@tabler/icons-webfont@latest/tabler-icons.min.css"
    />

    <!-- Swiper CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
    />

    <link rel="stylesheet" href="style.css" />
    <style>
      /* .card1,
        .card2 {
            display: block;
            position: relative;
            padding-bottom: 0.72em;
            font-size: 40px;
            line-height: 0.95;
            border-radius: 40px;
            box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.3);
        } */

      .modal-bg-image {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        border-radius: inherit;
        opacity: 0.1;
        z-index: -1;
      }

      .custom-modal1 {
        position: relative;
        overflow: hidden;
      }
    </style>
  </head>

  <body>
    <section class="header-bg">
      <div class="container px-0 flex-wrap">
        <!-- Left side: Social icons -->
        <!-- <div class="social-icons">
                <a href="https://facebook.com" style="text-decoration: none;" target="_blank"><i
                        class="ti ti-brand-facebook"></i></a>
                <a href="https://twitter.com" style="text-decoration: none;" target="_blank"><i
                        class="ti ti-brand-twitter"></i></a>
                <a href="https://instagram.com" style="text-decoration: none;" target="_blank"><i
                        class="ti ti-brand-instagram"></i></a>
                <a href="https://linkedin.com" style="text-decoration: none;" target="_blank"><i
                        class="ti ti-brand-linkedin"></i></a>
            </div> -->

        <div class="py-1">
          <img src="img/1new-daawat-logo.png" width="140" alt="" />
        </div>

        <!-- Hamburger (for mobile) -->
        <div class="hamburger" onclick="toggleMenu()">
          <span></span>
          <span></span>
          <span></span>
        </div>

        <!-- Navigation (desktop + mobile sliding menu) -->
        <nav class="header-nav" id="navMenu">
          <!-- Close button (visible only in mobile menu) -->
          <div class="close-btn1" onclick="toggleMenu()">
            <i class="ti ti-x"></i>
          </div>

          <div class="py-2 d-block d-md-none">
            <img src="img/1new-daawat-logo.png" width="140" alt="" />
          </div>
          <a href="#movement">The Movement</a>
          <a href="#" id="shareBtn">Share</a>
          <a href="#myths">Myths</a>
          <a href="#faqs">FAQs</a>
        </nav>
      </div>
      <!-- Overlay (click to close on mobile) -->
      <div class="menu-overlay" id="menuOverlay" onclick="toggleMenu()"></div>
    </section>

    <!-- Hero Section -->
    <section class="hero animate__animated animate__fadeIn w-100">
      <img class="logo-img" src="img/new-full.png" alt="" />

      <div class="container pt-5">
        <div
          class="row w-100 mx-auto content-section"
          style="position: relative; overflow: visible"
        >
          <div class="col-12 col-lg-11 px-1 text-start">
            <h1 class="title">The Rice Challenge</h1>
            <p class="subtitle">
              This November, break the myths and<br
                class="d-none d-lg-block"
              />make <span>Rice Right</span> again
            </p>

            <div
              class="d-flex gap-5 align-items-start mt-4 flex-wrap justify-content-center justify-content-lg-start"
            >
              <div class="text-center text-lg-start">
                <div
                  class="d-flex justify-content-center justify-content-lg-start gap-2"
                >
                  <div id="countdown"></div>
                </div>
                <p class="counter-label mb-0">Challenges Taken</p>
                <button
                  class="animated-button animated-button-w btn mt-4 mb-0"
                  onclick="document.getElementById('scrolltotakeChallengeBtn').scrollIntoView({ behavior: 'smooth', block: 'center' });"
                >
                  <svg
                    viewBox="0 0 24 24"
                    class="arr-2"
                    xmlns="http://www.w3.org/2000/svg"
                    style="fill: #110d85"
                  >
                    <path
                      d="M16.1716 10.9999L10.8076 5.63589L12.2218 4.22168L20 11.9999L12.2218 19.778L10.8076 18.3638L16.1716 12.9999H4V10.9999H16.1716Z"
                    ></path>
                  </svg>
                  <span class="text btn-text">Take the Challenge</span>
                  <span class="circle"></span>
                  <svg
                    viewBox="0 0 24 24"
                    class="arr-1"
                    xmlns="http://www.w3.org/2000/svg"
                    style="fill: #110d85"
                  >
                    <path
                      d="M16.1716 10.9999L10.8076 5.63589L12.2218 4.22168L20 11.9999L12.2218 19.778L10.8076 18.3638L16.1716 12.9999H4V10.9999H16.1716Z"
                    ></path>
                  </svg>
                </button>
              </div>
              <div
                class="counter-placeholder text-center text-md-start p-0 ml-web"
              >
                <div>
                  <div id="countdown1"></div>
                </div>
                <h5 class="counter-label mb-0">People talking about it</h5>
                <div
                  class="actions mb-0 mt-4 justify-content-center justify-content-md-start"
                >
                  <!-- <button class="share-btn blue" id="shareBtn">
                                    <i class="ti ti-share"></i>
                                    <span class="btn-text">Share</span>
                                    <div class="pulse-ring"></div>
                                </button> -->
                  <button
                    class="animated-button animated-button-w btn mt-0 mb-0"
                    id="shareBtn"
                  >
                    <svg
                      viewBox="0 0 24 24"
                      class="arr-2"
                      xmlns="http://www.w3.org/2000/svg"
                      style="fill: #110d85"
                    >
                      <path
                        d="M16.1716 10.9999L10.8076 5.63589L12.2218 4.22168L20 11.9999L12.2218 19.778L10.8076 18.3638L16.1716 12.9999H4V10.9999H16.1716Z"
                      ></path>
                    </svg>
                    <span class="text btn-text">Share</span>
                    <span class="circle"></span>
                    <svg
                      viewBox="0 0 24 24"
                      class="arr-1"
                      xmlns="http://www.w3.org/2000/svg"
                      style="fill: #110d85"
                    >
                      <path
                        d="M16.1716 10.9999L10.8076 5.63589L12.2218 4.22168L20 11.9999L12.2218 19.778L10.8076 18.3638L16.1716 12.9999H4V10.9999H16.1716Z"
                      ></path>
                    </svg>
                  </button>
                </div>
              </div>
            </div>
          </div>

          <div class="col-lg-1 image-section py-5 d-none d-xl-block">
            <div class="image-placeholder">
              <img src="img/Shahrukh-top-banner.png" alt="" />
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Choose Your Rice Challenge -->
    <section class="rice-challenge text-center py-0">
      <div class="container d-flex flex-column gap-2 align-items-center">
        <div class="py-2 w-100">
          <!-- Heading -->
          <!-- <h1>Rice Your Awareness</h1> -->
          <div
            class="d-flex justify-content-center flex-wrap w-100 my-4 heading-gap"
          >
            <div class="d-flex gap-3 align-items-center">
              <img src="img/2badge.png" width="70" class="rounded" alt="" />
              <h2 class="text-start">
                Get Your <br /><span class="challenge-title"
                  >Badge of Honour</span
                >
              </h2>
            </div>
            <div class="d-flex gap-3 align-items-center">
              <img
                src="img/Leema_Mahajan.jpeg"
                width="70"
                class="rounded"
                alt=""
              />
              <h2 class="text-start">
                Exclusive <br />
                <span class="challenge-title">Expert-Crafted Meal Plan</span>
              </h2>
            </div>
          </div>
        </div>
        <!-- <h4>Select one of these</h4> -->
        <div
          class="row justify-content-center g-4 py-3 dynamic-challenge-options w-100"
          id="scrolltotakeChallengeBtn"
        >
          <!-- 1 Week -->
          <div class="col-6 col-md-3">
            <div
              class="challenge-card py-3 position-relative px-3 rounded-3 d-flex gap-2 justify-content-center align-items-center"
              data-image="img/week1.jpg"
              data-share="https://example.com/week1.jpg"
              data-duration="7 days"
            >
              <h5 class="fw-bold mb-0">7 Days</h5>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="32"
                height="32"
                viewBox="0 0 24 24"
                fill="none"
                stroke="#cd7f32"
                stroke-width="1.75"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="icon icon-tabler icons-tabler-outline icon-tabler-award badge-icon-svg"
              >
                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                <path d="M12 9m-6 0a6 6 0 1 0 12 0a6 6 0 1 0 -12 0" />
                <path d="M12 15l3.4 5.89l1.598 -3.233l3.598 .232l-3.4 -5.889" />
                <path
                  d="M6.802 12l-3.4 5.89l3.598 -.233l1.598 3.232l3.4 -5.889"
                />
              </svg>
            </div>
          </div>
          <!-- 2 Weeks -->
          <div class="col-6 col-md-3">
            <div
              class="challenge-card py-3 position-relative px-3 rounded-3 d-flex gap-2 justify-content-center align-items-center"
              data-image="img/week2.jpg"
              data-share="https://example.com/week2.jpg"
              data-duration="14 days"
            >
              <h5 class="fw-bold mb-0">14 Days</h5>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="32"
                height="32"
                viewBox="0 0 24 24"
                fill="none"
                stroke="#c0c0c0"
                stroke-width="1.75"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="icon icon-tabler icons-tabler-outline icon-tabler-award badge-icon-svg"
              >
                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                <path d="M12 9m-6 0a6 6 0 1 0 12 0a6 6 0 1 0 -12 0" />
                <path d="M12 15l3.4 5.89l1.598 -3.233l3.598 .232l-3.4 -5.889" />
                <path
                  d="M6.802 12l-3.4 5.89l3.598 -.233l1.598 3.232l3.4 -5.889"
                />
              </svg>
            </div>
          </div>
          <!-- 3 Weeks -->
          <div class="col-6 col-md-3">
            <div
              class="challenge-card py-3 position-relative px-3 rounded-3 d-flex gap-2 justify-content-center align-items-center"
              data-image="img/week3.jpg"
              data-share="https://example.com/week3.jpg"
              data-duration="21 days"
            >
              <h5 class="fw-bold mb-0">21 Days</h5>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="32"
                height="32"
                viewBox="0 0 24 24"
                fill="none"
                stroke="#ffd700"
                stroke-width="1.75"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="icon icon-tabler icons-tabler-outline icon-tabler-award badge-icon-svg"
              >
                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                <path d="M12 9m-6 0a6 6 0 1 0 12 0a6 6 0 1 0 -12 0" />
                <path d="M12 15l3.4 5.89l1.598 -3.233l3.598 .232l-3.4 -5.889" />
                <path
                  d="M6.802 12l-3.4 5.89l3.598 -.233l1.598 3.232l3.4 -5.889"
                />
              </svg>
            </div>
          </div>
          <!-- 30 Days -->
          <div class="col-6 col-md-3">
            <div
              class="challenge-card py-3 position-relative px-3 rounded-3 d-flex gap-2 justify-content-center align-items-center"
              data-image="img/30days.jpg"
              data-share="https://example.com/30days.jpg"
              data-duration="30 days"
            >
              <h5 class="fw-bold mb-0">30 Days</h5>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="32"
                height="32"
                viewBox="0 0 24 24"
                fill="none"
                stroke="#b9f2ff"
                stroke-width="1.75"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="icon icon-tabler icons-tabler-outline icon-tabler-award badge-icon-svg"
              >
                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                <path d="M12 9m-6 0a6 6 0 1 0 12 0a6 6 0 1 0 -12 0" />
                <path d="M12 15l3.4 5.89l1.598 -3.233l3.598 .232l-3.4 -5.889" />
                <path
                  d="M6.802 12l-3.4 5.89l3.598 -.233l1.598 3.232l3.4 -5.889"
                />
              </svg>
            </div>
          </div>
        </div>

        <!-- Myths Busted Button -->
        <button
          class="animated-button btn mt-3 mb-5"
          id="takeChallengeBtn"
          data-bs-toggle="modal"
          data-bs-target="#dynamicChallengeModal"
        >
          <svg
            viewBox="0 0 24 24"
            class="arr-2"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M16.1716 10.9999L10.8076 5.63589L12.2218 4.22168L20 11.9999L12.2218 19.778L10.8076 18.3638L16.1716 12.9999H4V10.9999H16.1716Z"
            ></path>
          </svg>
          <span class="text">Take the Challenge</span>
          <span class="circle"></span>
          <svg
            viewBox="0 0 24 24"
            class="arr-1"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M16.1716 10.9999L10.8076 5.63589L12.2218 4.22168L20 11.9999L12.2218 19.778L10.8076 18.3638L16.1716 12.9999H4V10.9999H16.1716Z"
            ></path>
          </svg>
        </button>

        <!-- Dynamic Modal -->
        <div
          class="modal fade"
          id="dynamicChallengeModal"
          tabindex="-1"
          aria-hidden="true"
        >
          <div class="modal-dialog modal-dialog-centered modal-portrait">
            <div class="modal-content custom-modal1">
              <!-- Dynamic Modal Background Image -->
              <div id="dynamicModalImage" class="modal-bg-image"></div>

              <!-- Close Button -->
              <button
                type="button"
                class="btn-close custom-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              >
                <i class="ti ti-x"></i>
              </button>

              <!-- Share Button -->
              <button
                class="btn btn-light btn-sm position-absolute"
                id="dynamicShareBtn"
                style="top: 15px; right: 50px"
              >
                <i class="ti ti-share"></i>
              </button>

              <!-- Modal Body -->
              <div
                class="modal-body text-center h-100 d-flex align-items-center justify-content-center"
              >
                <div class="quiz-card py-5 px-3 px-lg-5 w-100">
                  <h5 id="quiz-question" class="mb-4"></h5>
                  <div id="quiz-options"></div>
                  <button class="btn btn-dark mt-4 w-100" id="next-btn">
                    Next
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="slider-section pb-0 mb-5">
      <!-- 30 Days Challenge -->
      <div class="challenge-section animate__animated animate__fadeIn pb-0">
        <h2 class="30days">People Taking the <span>Rice Challenge</span></h2>
        <!-- <p class="mb-2 mb-md-0" style="color: #535151;font-size: 24px;">This November, pledge to Rice Your
                Awareness. <br> A month to
                consume rice, rise
                above myths, and turn doubt into discovery.
            </p> -->
      </div>

      <!-- Mobile Auto-Scrolling Slider -->
      <div class="mobile-slider">
        <div class="mobile-track">
          <div class="card">
            <a
              href="https://www.instagram.com/reel/DJrjKEsPd9f/?hl=en"
              target="_blank"
            >
              <div class="overlay">
                <i class="ti ti-player-play-filled"></i>
              </div>
              <img src="img/slider/1.png" />
            </a>
          </div>
          <div class="card">
            <a
              href="https://www.instagram.com/reel/DJrjKEsPd9f/?hl=en"
              target="_blank"
            >
              <div class="overlay">
                <i class="ti ti-player-play-filled"></i>
              </div>
              <img src="img/slider/2.png" />
            </a>
          </div>
          <div class="card">
            <a
              href="https://www.instagram.com/reel/DJrjKEsPd9f/?hl=en"
              target="_blank"
            >
              <div class="overlay">
                <i class="ti ti-player-play-filled"></i>
              </div>
              <img src="img/slider/3.png" />
            </a>
          </div>
          <div class="card">
            <a
              href="https://www.instagram.com/reel/DJrjKEsPd9f/?hl=en"
              target="_blank"
            >
              <div class="overlay">
                <i class="ti ti-player-play-filled"></i>
              </div>
              <img src="img/slider/4.png" />
            </a>
          </div>
          <div class="card">
            <a
              href="https://www.instagram.com/reel/DJrjKEsPd9f/?hl=en"
              target="_blank"
            >
              <div class="overlay">
                <i class="ti ti-player-play-filled"></i>
              </div>
              <img src="img/slider/5.png" />
            </a>
          </div>
          <div class="card">
            <a
              href="https://www.instagram.com/reel/DJrjKEsPd9f/?hl=en"
              target="_blank"
            >
              <div class="overlay">
                <i class="ti ti-player-play-filled"></i>
              </div>
              <img src="img/slider/6.png" />
            </a>
          </div>
          <div class="card">
            <a
              href="https://www.instagram.com/reel/DJrjKEsPd9f/?hl=en"
              target="_blank"
            >
              <div class="overlay">
                <i class="ti ti-player-play-filled"></i>
              </div>
              <img src="img/slider/7.png" />
            </a>
          </div>
          <div class="card">
            <a
              href="https://www.instagram.com/reel/DJrjKEsPd9f/?hl=en"
              target="_blank"
            >
              <div class="overlay">
                <i class="ti ti-player-play-filled"></i>
              </div>
              <img src="img/slider/8.png" />
            </a>
          </div>

          <div class="card">
            <a
              href="https://www.instagram.com/reel/DJrjKEsPd9f/?hl=en"
              target="_blank"
            >
              <div class="overlay">
                <i class="ti ti-player-play-filled"></i>
              </div>
              <img src="img/slider/1.png" />
            </a>
          </div>
          <div class="card">
            <a
              href="https://www.instagram.com/reel/DJrjKEsPd9f/?hl=en"
              target="_blank"
            >
              <div class="overlay">
                <i class="ti ti-player-play-filled"></i>
              </div>
              <img src="img/slider/2.png" />
            </a>
          </div>
          <div class="card">
            <a
              href="https://www.instagram.com/reel/DJrjKEsPd9f/?hl=en"
              target="_blank"
            >
              <div class="overlay">
                <i class="ti ti-player-play-filled"></i>
              </div>
              <img src="img/slider/3.png" />
            </a>
          </div>
          <div class="card">
            <a
              href="https://www.instagram.com/reel/DJrjKEsPd9f/?hl=en"
              target="_blank"
            >
              <div class="overlay">
                <i class="ti ti-player-play-filled"></i>
              </div>
              <img src="img/slider/4.png" />
            </a>
          </div>
          <div class="card">
            <a
              href="https://www.instagram.com/reel/DJrjKEsPd9f/?hl=en"
              target="_blank"
            >
              <div class="overlay">
                <i class="ti ti-player-play-filled"></i>
              </div>
              <img src="img/slider/5.png" />
            </a>
          </div>
          <div class="card">
            <a
              href="https://www.instagram.com/reel/DJrjKEsPd9f/?hl=en"
              target="_blank"
            >
              <div class="overlay">
                <i class="ti ti-player-play-filled"></i>
              </div>
              <img src="img/slider/6.png" />
            </a>
          </div>
          <div class="card">
            <a
              href="https://www.instagram.com/reel/DJrjKEsPd9f/?hl=en"
              target="_blank"
            >
              <div class="overlay">
                <i class="ti ti-player-play-filled"></i>
              </div>
              <img src="img/slider/7.png" />
            </a>
          </div>
          <div class="card">
            <a
              href="https://www.instagram.com/reel/DJrjKEsPd9f/?hl=en"
              target="_blank"
            >
              <div class="overlay">
                <i class="ti ti-player-play-filled"></i>
              </div>
              <img src="img/slider/8.png" />
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- FAQ intro: left content + right image -->
    <section class="py-5 interaction-section" id="movement">
      <div class="text-center">
        <h2 class="faq-title">The Movement</h2>
      </div>
      <div class="container">
        <div class="row align-items-center py-4">
          <div class="col-12 col-lg-6">
            <p class="p-tag">
              Rice Your Awareness by Daawat is a movement to help people
              understand rice the right way - as a food that brings balance,
              nourishment, and energy to everyday life.
            </p>

            <p class="p-tag">
              At the heart of this initiative lies The Rice Challenge - an
              experience that invites you to eat mindfully and discover how rice
              can make you feel lighter, more active, and truly refreshed.
            </p>

            <p class="p-tag">
              Rich in natural carbohydrates, easy to digest, and naturally
              gluten-free, rice supports gut health, sustained energy, and
              overall well-being - making it a perfect fit for every lifestyle.
            </p>
            <p class="p-tag">
              Because good health doesn’t come from cutting food out - it comes
              from understanding it.
            </p>

            <p class="mb-4 p-tag">
              This November, take <span>The Rice Challenge</span> and experience
              the truth - <span style="">Rice is Right</span>.
            </p>
          </div>

          <div
            class="col-12 col-lg-6 text-center mt-4 mt-lg-0"
            style="position: relative"
          >
            <img
              src="img/the-movement.png"
              alt="Rice"
              class="img-fluid mx-auto movement-img"
            />
          </div>
        </div>
      </div>
    </section>

    <section class="small-cards-section">
      <h2 class="section-title text-center">
        <span>Myth Busting</span> Rice Facts
      </h2>

      <div class="container">
        <div class="row g-4 py-4">
          <!-- Card 1 -->
          <div class="col-12 col-md-6">
            <div class="rice-card">
              <div class="card-content">
                <div class="myth-section">
                  <div class="myth-badge">Myth</div>
                  <div class="myth-text">Rice makes you sleepy</div>
                </div>

                <div class="card-divider"></div>

                <div class="fact-section">
                  <div class="fact-badge">Fact</div>
                  <div class="fact-text">
                    Rice helps release serotonin and melatonin - nature's sleep
                    aids. It's science, not sluggishness.
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Card 2 -->
          <div class="col-12 col-md-6">
            <div class="rice-card">
              <div class="card-content">
                <div class="myth-section">
                  <div class="myth-badge">Myth</div>
                  <div class="myth-text">Rice makes you feel heavy or lazy</div>
                </div>

                <div class="card-divider"></div>

                <div class="fact-section">
                  <div class="fact-badge">Fact</div>
                  <div class="fact-text">
                    Rice digests faster and is naturally gluten-free, making it
                    easy on the stomach and feeling light.
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Card 3 -->
          <div class="col-12 col-md-6">
            <div class="rice-card">
              <div class="card-content">
                <div class="myth-section">
                  <div class="myth-badge">Myth</div>
                  <div class="myth-text">Fitness means cutting out rice</div>
                </div>

                <div class="card-divider"></div>

                <div class="fact-section">
                  <div class="fact-badge">Fact</div>
                  <div class="fact-text">
                    Many athletes and trainers rely on rice for sustained energy
                    and muscle recovery. Balance builds fitness, not
                    deprivation.
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Card 4 -->
          <div class="col-12 col-md-6">
            <div class="rice-card">
              <div class="card-content">
                <div class="myth-section">
                  <div class="myth-badge">Myth</div>
                  <div class="myth-text">Rice causes bloating</div>
                </div>

                <div class="card-divider"></div>

                <div class="fact-section">
                  <div class="fact-badge">Fact</div>
                  <div class="fact-text">
                    Rice is low in sodium and gluten-free - it actually reduces
                    water retention and soothes digestion.
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Card 5 -->
          <div class="col-12 col-md-6">
            <div class="rice-card">
              <div class="card-content">
                <div class="myth-section">
                  <div class="myth-badge">Myth</div>
                  <div class="myth-text">You should avoid rice for dinner</div>
                </div>

                <div class="card-divider"></div>

                <div class="fact-section">
                  <div class="fact-badge">Fact</div>
                  <div class="fact-text">
                    Rice is light, easy to digest, and helps relax your system -
                    perfect for calm, quality sleep.
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Card 6 -->
          <div class="col-12 col-md-6">
            <div class="rice-card">
              <div class="card-content">
                <div class="myth-section">
                  <div class="myth-badge">Myth</div>
                  <div class="myth-text">Skipping rice helps detox</div>
                </div>

                <div class="card-divider"></div>

                <div class="fact-section">
                  <div class="fact-badge">Fact</div>
                  <div class="fact-text">
                    Rice with dal, veggies, or curd is part of natural Ayurvedic
                    detox meals - it calms the system and restores balance.
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Card 7 -->
          <div class="col-12 col-md-6">
            <div class="rice-card">
              <div class="card-content">
                <div class="myth-section">
                  <div class="myth-badge">Myth</div>
                  <div class="myth-text">
                    Rice isn't suitable for weight loss
                  </div>
                </div>

                <div class="card-divider"></div>

                <div class="fact-section">
                  <div class="fact-badge">Fact</div>
                  <div class="fact-text">
                    When portioned and paired right, rice supports clean eating
                    and steady energy - gives far better results.
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Card 8 -->
          <div class="col-12 col-md-6">
            <div class="rice-card">
              <div class="card-content">
                <div class="myth-section">
                  <div class="myth-badge">Myth</div>
                  <div class="myth-text">Rice has empty calories</div>
                </div>

                <div class="card-divider"></div>

                <div class="fact-section">
                  <div class="fact-badge">Fact</div>
                  <div class="fact-text">
                    Rice provides complex carbs and essential nutrients that
                    support metabolism and brain function - not "empty," but
                    essential.
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Quiz Modal -->
    <div class="modal fade" id="quizModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content p-4">
          <div class="quiz-card">
            <h5 id="quiz-question-main" class="mb-4"></h5>
            <div id="quiz-options-main"></div>
            <div class="d-flex justify-content-between align-items-center mt-4">
              <button id="arrow-main" class="btn btn-outline-dark">
                &larr;
              </button>
              <button id="next-btn-main" class="btn btn-dark">Next</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <section class="py-5">
      <div class="container">
        <div class="w-100 text-center">
          <h2 class="faq-title text-center mb-5" id="faqs">FAQ's</h2>
          <div class="accordion faq-accordion" id="faqAccordion">
            <div class="accordion-item">
              <h2 class="accordion-header" id="headingOne">
                <button
                  class="accordion-button collapsed"
                  type="button"
                  data-bs-toggle="collapse"
                  data-bs-target="#collapseOne"
                  aria-expanded="false"
                  aria-controls="collapseOne"
                >
                  A. What is the Rice Your Awareness Challenge?
                </button>
              </h2>
              <div
                id="collapseOne"
                class="accordion-collapse collapse"
                aria-labelledby="headingOne"
                data-bs-parent="#faqAccordion"
              >
                <div class="accordion-body">
                  A 30-days awareness and fitness movement by Daawat, inspiring
                  India to take the Rice Challenge - to break myths, eat
                  mindfully, and experience how Rice is Right for health,
                  energy, and balance.
                </div>
              </div>
            </div>

            <div class="accordion-item">
              <h2 class="accordion-header" id="headingTwo">
                <button
                  class="accordion-button collapsed"
                  type="button"
                  data-bs-toggle="collapse"
                  data-bs-target="#collapseTwo"
                  aria-expanded="false"
                  aria-controls="collapseTwo"
                >
                  B. How do I participate?
                </button>
              </h2>
              <div
                id="collapseTwo"
                class="accordion-collapse collapse"
                aria-labelledby="headingTwo"
                data-bs-parent="#faqAccordion"
              >
                <div class="accordion-body">
                  Visit
                  <a href="https://www.daawat.com/rya" target="_blank"
                    >www.daawat.com/rya</a
                  >
                  , choose your challenge duration (7 / 14 / 21 / 30 days),
                  register with your details, download your Exclusive Expert
                  Crafted Meal Plan, and get your Digital Badge. Invite friends
                  and inspire others to join the movement.
                </div>
              </div>
            </div>

            <div class="accordion-item">
              <h2 class="accordion-header" id="headingThree">
                <button
                  class="accordion-button collapsed"
                  type="button"
                  data-bs-toggle="collapse"
                  data-bs-target="#collapseThree"
                  aria-expanded="false"
                  aria-controls="collapseThree"
                >
                  C. Which hashtags should I use?
                </button>
              </h2>
              <div
                id="collapseThree"
                class="accordion-collapse collapse"
                aria-labelledby="headingThree"
                data-bs-parent="#faqAccordion"
              >
                <div class="accordion-body">
                  Use #RiceYourAwareness, #TheRiceChallenge & #RiceIsRight to
                  share your journey, motivate others, and be part of the
                  movement.
                </div>
              </div>
            </div>

            <div class="accordion-item">
              <h2 class="accordion-header" id="headingFour">
                <button
                  class="accordion-button collapsed"
                  type="button"
                  data-bs-toggle="collapse"
                  data-bs-target="#collapseFour"
                  aria-expanded="false"
                  aria-controls="collapseFour"
                >
                  D. Is this a weight-loss or fitness challenge?
                </button>
              </h2>
              <div
                id="collapseFour"
                class="accordion-collapse collapse"
                aria-labelledby="headingFour"
                data-bs-parent="#faqAccordion"
              >
                <div class="accordion-body">
                  It’s a fitness-driven awareness challenge that helps you feel
                  lighter, more energetic, and confident about including rice as
                  part of a healthy, active lifestyle
                </div>
              </div>
            </div>

            <div class="accordion-item">
              <h2 class="accordion-header" id="headingFive">
                <button
                  class="accordion-button collapsed"
                  type="button"
                  data-bs-toggle="collapse"
                  data-bs-target="#collapseFive"
                  aria-expanded="false"
                  aria-controls="collapseFive"
                >
                  E. What if I can’t follow it daily?
                </button>
              </h2>
              <div
                id="collapseFive"
                class="accordion-collapse collapse"
                aria-labelledby="headingFive"
                data-bs-parent="#faqAccordion"
              >
                <div class="accordion-body">
                  The challenge is flexible - pick a shorter duration or simply
                  include rice mindfully whenever you can. Every effort counts
                  toward a fitter, more balanced you.
                </div>
              </div>
            </div>

            <div class="accordion-item">
              <h2 class="accordion-header" id="headingSix">
                <button
                  class="accordion-button collapsed"
                  type="button"
                  data-bs-toggle="collapse"
                  data-bs-target="#collapseSix"
                  aria-expanded="false"
                  aria-controls="collapseSix"
                >
                  F. Are the Rice Diet Plans the same for everyone?
                </button>
              </h2>
              <div
                id="collapseSix"
                class="accordion-collapse collapse"
                aria-labelledby="headingSix"
                data-bs-parent="#faqAccordion"
              >
                <div class="accordion-body">
                  No, there are multiple plans based on regions, preferences,
                  and lifestyles - so everyone can enjoy rice their way.
                </div>
              </div>
            </div>

            <div class="accordion-item">
              <h2 class="accordion-header" id="headingSeven">
                <button
                  class="accordion-button collapsed"
                  type="button"
                  data-bs-toggle="collapse"
                  data-bs-target="#collapseSeven"
                  aria-expanded="false"
                  aria-controls="collapseSeven"
                >
                  G. What results should I expect?
                </button>
              </h2>
              <div
                id="collapseSeven"
                class="accordion-collapse collapse"
                aria-labelledby="headingSeven"
                data-bs-parent="#faqAccordion"
              >
                <div class="accordion-body">
                  Better energy, improved digestion, a lighter body, and the
                  simple joy of knowing that eating right with rice feels good -
                  inside and out
                </div>
              </div>
            </div>

            <div class="accordion-item">
              <h2 class="accordion-header" id="headingEight">
                <button
                  class="accordion-button collapsed"
                  type="button"
                  data-bs-toggle="collapse"
                  data-bs-target="#collapseEight"
                  aria-expanded="false"
                  aria-controls="collapseEight"
                >
                  H. Will there be any gratification?
                </button>
              </h2>
              <div
                id="collapseEight"
                class="accordion-collapse collapse"
                aria-labelledby="headingEight"
                data-bs-parent="#faqAccordion"
              >
                <div class="accordion-body">
                  The real gratification is the feeling of lightness, energy,
                  and confidence that comes from building trust in rice and
                  being part of a movement that celebrates mindful, balanced
                  eating.
                </div>
              </div>
            </div>

            <!-- Add more items like D, E, F as in your image -->
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer>
      <div class="container">
        <div class="row w-100 gap-4 gap-md-0 mx-auto">
          <!-- <div class="col-12 col-md-6 col-lg-3 d-flex align-items-center justify-content-center">
                <img src="img/daawat-l.png" width="160" alt="">
            </div> -->
          <div
            class="col-12 col-md-6 col-lg-6 d-flex align-items-center flex-wrap justify-content-md-start justify-content-center"
          >
            <span class="mb-2"
              >An initiative by Daawat for #riceyourawareness</span
            >
            Copyright 2025 All Rights Reserved by Daawat
          </div>
          <!-- <div class="col-12 col-md-6 col-lg-4 d-flex align-items-center justify-content-center">

                </div> -->

          <div
            class="col-12 col-md-6 col-lg-6 d-flex align-items-center align-items-md-end flex-column"
          >
            <div class="social-icons1">
              <a
                href="https://www.facebook.com/DaawatBasmatiOfficial/"
                style="text-decoration: none"
                target="_blank"
                ><i class="ti ti-brand-facebook"></i
              ></a>
              <!-- <a href="https://twitter.com" style="text-decoration: none;" target="_blank"><i
                                class="ti ti-brand-twitter"></i></a> -->
              <a
                href="https://instagram.com/daawatofficial"
                style="text-decoration: none"
                target="_blank"
                ><i class="ti ti-brand-instagram"></i
              ></a>
              <a
                href="https://www.youtube.com/@DaawatTheFinest"
                style="text-decoration: none"
                target="_blank"
                ><i class="ti ti-brand-youtube"></i
              ></a>
            </div>
            <a href="" style="text-decoration: none; color: white">
              Terms and Conditions
            </a>
          </div>
        </div>
      </div>
    </footer>

    <!-- Floating buttons -->
    <div class="floating-buttons">
      <div class="scroll-top-container">
        <svg
          class="progress-ring"
          width="56"
          height="56"
          viewBox="0 0 56 56"
          preserveAspectRatio="xMidYMid meet"
        >
          <defs>
            <linearGradient id="ringGrad" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" stop-color="#d28d00" />
              <stop offset="50%" stop-color="#b48a2c" />
              <stop offset="100%" stop-color="#a5885d" />
            </linearGradient>
          </defs>
          <!-- background track -->
          <circle class="progress-ring__track" cx="28" cy="28" r="22" />
          <!-- animated progress -->
          <circle class="progress-ring__circle" cx="28" cy="28" r="22" />
        </svg>
        <button id="goTopBtn" title="Go to top">
          <i class="ti ti-chevron-up"></i>
        </button>
      </div>

      <button id="shopRiceBtn" class="shop-rice-btn" title="Shop Daawat Rice">
        Shop Rice
      </button>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script>
      // API Configuration - Dynamic Base URL based on environment
      const API_CONFIG = {
        // Determine base URL based on current window location
        BASE_URL: (() => {
          if (window.location.href.includes("http://13.201.26.193")) {
            return "http://13.201.26.193:8080";
          } else {
            return "http://localhost:8080";
          }
        })(),

        // API Endpoints
        ENDPOINTS: {
          REGISTER_CHALLENGER: "/challenger/register",
          VERIFY_OTP: "/challenger/verify",
          SUBMIT_CHALLENGE: "/challenger/submit",
        },
      };

      // Helper function to build full API URLs
      function getApiUrl(endpoint) {
        return API_CONFIG.BASE_URL + endpoint;
      }

      // Function to download PDF from URL
      function downloadPdfFromUrl(pdfUrl, fileName) {
        try {
          // Create a hidden link with download attribute
          const link = document.createElement("a");
          link.href = pdfUrl;
          link.download = fileName || "Daawat-Rice-Challenge-Meal-Plan.pdf";
          link.style.display = "none";

          // Add link to document
          document.body.appendChild(link);

          // Trigger download
          link.click();

          // Remove link
          document.body.removeChild(link);

          // If download attribute doesn't work with external URLs,
          // show user message and provide manual download option
          setTimeout(function () {
            // This will be shown in the congratulations screen anyway
          }, 1000);

          return true;
        } catch (error) {
          console.error("Error downloading PDF:", error);
          return false;
        }
      }

      // Badge download function based on duration
      function downloadBadgeByDuration(duration) {
        let badgeFileName = "";

        // Map duration to badge file
        switch (duration) {
          case "7 days":
            badgeFileName = "bronze.png";
            break;
          case "14 days":
            badgeFileName = "silver.png";
            break;
          case "21 days":
            badgeFileName = "gold.png";
            break;
          case "30 days":
            badgeFileName = "diamond.png";
            break;
          default:
            console.error("Unknown duration:", duration);
            return;
        }

        // Create download link
        const link = document.createElement("a");
        link.href = `img/${badgeFileName}`;
        link.download = `daawat-${duration.replace(
          " ",
          "-"
        )}-challenge-badge.png`;
        link.style.display = "none";

        // Add to DOM, click, and remove
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
      }

      // Test function for API endpoints (for debugging)
      window.testAPIs = {
        testRegister: async function () {
          try {
            const response = await fetch(
              getApiUrl(API_CONFIG.ENDPOINTS.REGISTER_CHALLENGER),
              {
                method: "POST",
                headers: {
                  accept: "application/json",
                  "Content-Type": "application/json",
                },
                body: JSON.stringify({
                  duration: "7 days",
                  name: "Test User",
                  mobile: "9999999999",
                }),
              }
            );
            const result = await response.json();
            return result;
          } catch (error) {
            console.error("Register Test Error:", error);
            return null;
          }
        },

        testVerify: async function (userId, otp = "1234") {
          try {
            const response = await fetch(
              getApiUrl(API_CONFIG.ENDPOINTS.VERIFY_OTP),
              {
                method: "POST",
                headers: {
                  accept: "application/json",
                  "Content-Type": "application/json",
                },
                body: JSON.stringify({
                  userId: userId,
                  otp: otp,
                }),
              }
            );
            const result = await response.json();
            return result;
          } catch (error) {
            console.error("Verify Test Error:", error);
            return null;
          }
        },

        testSubmit: async function (userId = "68ecf1d723d4ade0dca9be9b") {
          try {
            const response = await fetch(
              getApiUrl(API_CONFIG.ENDPOINTS.SUBMIT_CHALLENGE),
              {
                method: "POST",
                headers: {
                  accept: "application/json",
                  "Content-Type": "application/json",
                },
                body: JSON.stringify({
                  userId: userId,
                  category: "Vegetarian",
                  subcategory: "Beginner",
                  type: "Weight Loss",
                }),
              }
            );
            const result = await response.json();
            return result;
          } catch (error) {
            console.error("Submit Test Error:", error);
            return null;
          }
        },
      };

      // Function to fetch progress data from API
      async function fetchProgressData() {
        try {
          const response = await fetch(getApiUrl("/challenger/progress"), {
            method: "GET",
            headers: {
              accept: "application/json",
            },
          });

          if (response.ok) {
            const result = await response.json();
            return result.data;
          } else {
            console.error("Failed to fetch progress data:", response.status);
            return null;
          }
        } catch (error) {
          console.error("Error fetching progress data:", error);
          return null;
        }
      }
    </script>

    <script>
      // 3D rotation (only runs on tablet & above)

      const ring = document.getElementById("ring");
      if (ring) {
        const cards = Array.from(ring.children);
        const N = cards.length;
        const radius = 3200;
        const step = 360 / N;

        // position cards evenly
        cards.forEach((card, i) => {
          const angle = step * i;
          card.style.transform = `rotateY(${angle}deg) translateZ(${radius}px)`;
        });

        let angle = 0;
        let paused = false;

        function rotate() {
          if (!paused) {
            angle += 0.05; // speed control 0.02 means slow // 0.1 means fast
            ring.style.transform = `rotateY(${angle}deg)`;
          }
          requestAnimationFrame(rotate);
        }
        rotate();

        cards.forEach((card) => {
          card.addEventListener("mouseenter", () => (paused = true));
          card.addEventListener("mouseleave", () => (paused = false));
        });
      }
    </script>

    <script>
      // Ensure modal comes after backdrop in DOM

      document.querySelectorAll(".modal").forEach((m) => {
        document.body.appendChild(m);
      });
    </script>

    <!-- share js  -->
    <script>
      // Attach listener to a parent element that exists in the DOM
      document.body.addEventListener("click", async (e) => {
        const shareBtn = e.target.closest("#shareBtn"); // works even if clicking child elements like <span> or <svg>
        if (!shareBtn) return; // exit if it's not a share button

        if (navigator.share) {
          try {
            await navigator.share({
              title: "Check this out!",
              text: "Awesome image to share.",
              url: "img/img1.png",
            });
          } catch (err) {
            console.error("Share failed:", err.message);
          }
        } else {
          // Browser doesn't support native share
        }
      });
    </script>

    <script>
      let selectedCard = null;

      const dynamicCards = document.querySelectorAll(
        ".dynamic-challenge-options .challenge-card"
      );
      const takeBtn = document.getElementById("takeChallengeBtn");
      const dynamicModalEl = document.getElementById("dynamicChallengeModal");
      const dynamicModalImage = document.getElementById("dynamicModalImage");
      const dynamicShareBtn = document.getElementById("dynamicShareBtn");
      const dynamicCloseBtn = dynamicModalEl
        ? dynamicModalEl.querySelector(".custom-close")
        : null;

      // Initialize modal instance ONCE
      let dynamicModal = null;
      if (dynamicModalEl) {
        dynamicModal = new bootstrap.Modal(dynamicModalEl, {
          backdrop: true,
          keyboard: true,
        });
      }

      // Card selection logic
      dynamicCards.forEach((card) => {
        card.addEventListener("click", () => {
          // Remove previous selection
          dynamicCards.forEach((c) => c.classList.remove("active"));
          // Highlight current
          card.classList.add("active");
          selectedCard = card;
        });
      });

      // Take the Challenge button
      takeBtn.addEventListener("click", (e) => {
        e.preventDefault(); // Prevent default form/button behavior

        // Update modal background image
        const img = selectedCard
          ? selectedCard.getAttribute("data-image")
          : null;
        if (dynamicModalImage && img) {
          dynamicModalImage.style.backgroundImage = `url(${img})`;
        }

        // Update share button
        const shareLink = selectedCard.getAttribute("data-share");
        if (dynamicShareBtn) {
          dynamicShareBtn.onclick = () => {
            if (navigator.share) {
              navigator
                .share({
                  title: "Check this out!",
                  url: shareLink,
                })
                .catch((err) => {
                  // Share failed silently
                });
            } else {
              // Share not supported
            }
          };
        } // Show modal
        dynamicModal.show();
      });

      // Close button explicitly hides modal
      dynamicCloseBtn.addEventListener("click", () => {
        dynamicModal.hide();
      });

      // Ensure overlay/backdrop removed when modal hidden
      if (dynamicModalEl) {
        dynamicModalEl.addEventListener("hidden.bs.modal", () => {
          document
            .querySelectorAll(".modal-backdrop")
            .forEach((b) => b.remove());
        });
      }
    </script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        let currentStep = 0;

        const quizCard = document.querySelector(".quiz-card");
        const questionEl = document.getElementById("quiz-question");
        const optionsEl = document.getElementById("quiz-options");
        const nextBtn = document.getElementById("next-btn");

        function loadStep(index) {
          if (!optionsEl) return;

          optionsEl.innerHTML = "";

          // ✅ STEP 0 — Name & Mobile + OTP
          if (index === 0) {
            // Get selected challenge duration for display
            let challengeText = "7 Day Challenge";
            if (selectedCard) {
              const duration =
                selectedCard.getAttribute("data-duration") || "7 days";
              const levelElement = selectedCard.querySelector("p");
              const level = levelElement
                ? levelElement.textContent.trim()
                : "Beginner";
              challengeText = `${duration.replace(
                " days",
                ""
              )} Day Challenge (${level})`;
            }

            if (questionEl) {
              questionEl.textContent = `Ready for the Challenge?`;
            }
            optionsEl.innerHTML = `
                <form id="userForm" class="d-flex flex-column gap-3">
                    <div class="mb-2">
                        <input type="text" class="form-control" id="name" placeholder="Enter your name" required />
                        <div class="text-danger small mt-1" id="nameError" style="display:none;"></div>
                    </div>
                    <div class="mb-2">
                        <input type="tel" class="form-control" id="mobile" placeholder="Enter mobile number" required />
                        <div class="text-danger small mt-1" id="mobileError" style="display:none;"></div>
                    </div>
                    <div class="text-danger small mt-1" id="challengeError" style="display:none;"></div>
                    <div class="text-success small mt-1" id="successMessage" style="display:none;"></div>

                    <button type="button" class="btn btn-dark w-100" id="sendOtpBtn">Submit</button>

                    <div id="otpSection" style="display:none;">
                        <div class="mb-2">
                            <input type="text" class="form-control mt-3" id="otp" placeholder="Enter OTP" maxlength="6" />
                            <div class="text-danger small mt-1" id="otpError" style="display:none;"></div>
                        </div>
                        <button type="button" class="btn btn-success w-100 mt-2" id="verifyOtpBtn">Verify OTP</button>
                    </div>
                </form>
            `;

            document
              .getElementById("sendOtpBtn")
              .addEventListener("click", async () => {
                // Clear previous error messages
                document.getElementById("nameError").style.display = "none";
                document.getElementById("mobileError").style.display = "none";
                document.getElementById("challengeError").style.display =
                  "none";
                document.getElementById("successMessage").style.display =
                  "none";

                const name = document.getElementById("name").value.trim();
                const mobile = document.getElementById("mobile").value.trim();

                // Validate inputs with specific error messages
                let hasError = false;

                if (!name) {
                  document.getElementById("nameError").textContent =
                    "Please enter your name";
                  document.getElementById("nameError").style.display = "block";
                  hasError = true;
                }

                if (!mobile) {
                  document.getElementById("mobileError").textContent =
                    "Please enter your mobile number";
                  document.getElementById("mobileError").style.display =
                    "block";
                  hasError = true;
                } else if (!/^\d{10}$/.test(mobile)) {
                  document.getElementById("mobileError").textContent =
                    "Please enter a valid 10-digit mobile number";
                  document.getElementById("mobileError").style.display =
                    "block";
                  hasError = true;
                }

                if (!selectedCard) {
                  document.getElementById("challengeError").textContent =
                    "Please select a challenge duration before proceeding";
                  document.getElementById("challengeError").style.display =
                    "block";
                  hasError = true;
                }

                if (hasError) {
                  return;
                }

                // Get selected challenge duration
                let duration = "7 days"; // default
                if (selectedCard) {
                  duration =
                    selectedCard.getAttribute("data-duration") || "7 days";
                }

                // Show loading state
                const sendOtpBtn = document.getElementById("sendOtpBtn");
                const originalText = sendOtpBtn.textContent;
                sendOtpBtn.textContent = "Registering...";
                sendOtpBtn.disabled = true;

                try {
                  // Call the registration API using common base URL
                  const response = await fetch(
                    getApiUrl(API_CONFIG.ENDPOINTS.REGISTER_CHALLENGER),
                    {
                      method: "POST",
                      headers: {
                        accept: "application/json",
                        "Content-Type": "application/json",
                      },
                      body: JSON.stringify({
                        duration: duration,
                        name: name,
                        mobile: mobile,
                      }),
                    }
                  );

                  if (response.ok) {
                    const result = await response.json();

                    // Store userId globally for OTP verification
                    const extractedUserId =
                      result.data?._id ||
                      result._id ||
                      result.id ||
                      result.userId;

                    if (!extractedUserId) {
                      console.error(
                        "No valid userId found in registration response:",
                        result
                      );
                      document.getElementById("challengeError").textContent =
                        "Registration successful but missing user ID. Please try again.";
                      document.getElementById("challengeError").style.display =
                        "block";
                      return;
                    }

                    window.userRegistrationData = {
                      userId: extractedUserId,
                      name: name,
                      mobile: mobile,
                      duration: duration,
                    };

                    // Also store in localStorage as backup
                    localStorage.setItem(
                      "userRegistrationData",
                      JSON.stringify(window.userRegistrationData)
                    );

                    // Show success message
                    document.getElementById("successMessage").textContent =
                      "OTP sent to your number.";
                    document.getElementById("successMessage").style.display =
                      "block";

                    document.getElementById("otpSection").style.display =
                      "block";
                  } else {
                    const errorData = await response.json().catch(() => ({}));
                    console.error("Registration failed:", errorData);
                    document.getElementById(
                      "challengeError"
                    ).textContent = `Registration failed: ${
                      errorData.message || "Please try again later"
                    }`;
                    document.getElementById("challengeError").style.display =
                      "block";
                  }
                } catch (error) {
                  console.error("Network error:", error);
                  document.getElementById("challengeError").textContent =
                    "Network error! Please check your connection and try again.";
                  document.getElementById("challengeError").style.display =
                    "block";
                } finally {
                  // Reset button state
                  sendOtpBtn.textContent = originalText;
                  sendOtpBtn.disabled = false;
                }
              });

            document
              .getElementById("verifyOtpBtn")
              .addEventListener("click", async () => {
                // Clear previous error messages
                document.getElementById("otpError").style.display = "none";

                const otp = document.getElementById("otp").value.trim();

                // Validate OTP input
                if (!otp) {
                  document.getElementById("otpError").textContent =
                    "Please enter the OTP";
                  document.getElementById("otpError").style.display = "block";
                  return;
                }

                // Try to restore from localStorage if window data is missing
                if (!window.userRegistrationData) {
                  try {
                    const storedData = localStorage.getItem(
                      "userRegistrationData"
                    );
                    if (storedData) {
                      window.userRegistrationData = JSON.parse(storedData);
                    }
                  } catch (e) {
                    // Error restoring from localStorage
                  }
                }

                if (
                  !window.userRegistrationData ||
                  !window.userRegistrationData.userId
                ) {
                  document.getElementById("otpError").textContent =
                    "Registration data not found. Please register again.";
                  document.getElementById("otpError").style.display = "block";
                  return;
                }

                // Show loading state
                const verifyOtpBtn = document.getElementById("verifyOtpBtn");
                const originalText = verifyOtpBtn.textContent;
                verifyOtpBtn.textContent = "Verifying...";
                verifyOtpBtn.disabled = true;

                try {
                  // Call the OTP verification API
                  const response = await fetch(
                    getApiUrl(API_CONFIG.ENDPOINTS.VERIFY_OTP),
                    {
                      method: "POST",
                      headers: {
                        accept: "application/json",
                        "Content-Type": "application/json",
                      },
                      body: JSON.stringify({
                        userId: window.userRegistrationData.userId,
                        otp: otp,
                      }),
                    }
                  );

                  if (response.ok) {
                    const result = await response.json();

                    // Store verification result
                    window.userRegistrationData.verified = true;
                    window.userRegistrationData.verificationResult = result;

                    // Download badge based on selected duration
                    if (selectedCard && selectedCard.dataset.duration) {
                      try {
                        downloadBadgeByDuration(selectedCard.dataset.duration);
                      } catch (badgeError) {
                        console.error("Badge download error:", badgeError);
                      }
                    }

                    // Show success message briefly
                    document.getElementById("successMessage").textContent =
                      "OTP verified successfully! Your badge is downloading...";
                    document.getElementById("successMessage").style.display =
                      "block";

                    // Proceed to next step after a short delay
                    setTimeout(() => {
                      currentStep = 1;
                      loadStep(currentStep);
                    }, 1000);
                  } else {
                    const errorData = await response.json().catch(() => ({}));
                    console.error("OTP verification failed:", errorData);
                    document.getElementById("otpError").textContent = ` ${
                      errorData.message || "Please try again."
                    }`;
                    document.getElementById("otpError").style.display = "block";
                  }
                } catch (error) {
                  console.error(
                    "Network error during OTP verification:",
                    error
                  );
                  document.getElementById("otpError").textContent =
                    "Network error! Please check your connection and try again.";
                  document.getElementById("otpError").style.display = "block";
                } finally {
                  // Reset button state
                  verifyOtpBtn.textContent = originalText;
                  verifyOtpBtn.disabled = false;
                }
              });

            nextBtn.style.display = "none";
          }

          // ✅ STEP 1 — Category & Subcategory
          if (index === 1) {
            questionEl.textContent = "Choose Your Meal Preference";
            optionsEl.innerHTML = `
                <div class="mb-3">
                    <select class="form-select" id="category">
                        <option selected disabled>Choose Meal Preference</option>
                        <option value="veg">Vegetarian</option>
                        <option value="veg-egg">Veg + Egg</option>
                        <option value="veg-meat">Veg + Meat</option>
                    </select>
                    <div class="text-danger small mt-1" id="categoryError" style="display:none;"></div>
                </div>
                <div class="mb-3">
                    <select class="form-select" id="subcategory" disabled>
                        <option selected>Choose Sub Category (Optional)</option>
                    </select>
                    <div class="text-danger small mt-1" id="subcategoryError" style="display:none;"></div>
                </div>
                <button class="btn btn-dark w-100" id="continueBtn">Continue</button>
            `;

            // Subcategories Data
            const subcategories = {
              veg: [
                "Weight Loss Meal Plan",
                "High Protien Meal Plan",
                "North Indian Meal Plan",
                "South Indian Meal Plan",
                "Asian Meal Plan",
                "Fusion Meal Plan",
                "Maharshtra Meal Plan",
                "Sattvikk Meal Plan",
              ],
              "veg-egg": [
                "Weight Loss Meal Plan",
                "High Protien Meal Plan",
                "North Indian Meal Plan",
                "South Indian Meal Plan",
                "Asian Meal Plan",
                "Fusion Meal Plan",
                "Maharshtra Meal Plan",
              ],
              "veg-meat": [
                "Weight Loss Meal Plan",
                "High Protien Meal Plan",
                "North Indian Meal Plan",
                "South Indian Meal Plan",
                "Asian Meal Plan",
                "Fusion Meal Plan",
                "Maharshtra Meal Plan",
              ],
            };

            const categorySelect = document.getElementById("category");
            const subcategorySelect = document.getElementById("subcategory");

            categorySelect.addEventListener("change", (e) => {
              const selected = e.target.value;
              subcategorySelect.innerHTML = `<option selected>Select Sub Category (Optional)</option>`;
              subcategorySelect.disabled = true;

              if (subcategories[selected]) {
                subcategories[selected].forEach((sub) => {
                  const opt = document.createElement("option");
                  opt.value = sub.toLowerCase().replace(/\s+/g, "-");
                  opt.textContent = sub;
                  subcategorySelect.appendChild(opt);
                });
                subcategorySelect.disabled = false;
                subcategorySelect.style.opacity = "0";
                setTimeout(() => {
                  subcategorySelect.style.transition = "opacity 0.3s";
                  subcategorySelect.style.opacity = "1";
                }, 50);
              }
            });

            document
              .getElementById("continueBtn")
              .addEventListener("click", async () => {
                // Clear previous error messages
                document.getElementById("categoryError").style.display = "none";
                document.getElementById("subcategoryError").style.display =
                  "none";

                let hasError = false;

                if (
                  !categorySelect.value ||
                  categorySelect.value === "Choose Meal Preference"
                ) {
                  document.getElementById("categoryError").textContent =
                    "Please select a meal preference";
                  document.getElementById("categoryError").style.display =
                    "block";
                  hasError = true;
                }

                // Subcategory is now optional - no validation required

                if (hasError) {
                  return;
                }

                // Check if user registration data exists
                if (
                  !window.userRegistrationData ||
                  !window.userRegistrationData.userId
                ) {
                  document.getElementById("categoryError").textContent =
                    "User registration data missing. Please restart the process.";
                  document.getElementById("categoryError").style.display =
                    "block";
                  return;
                }

                // Show loading state
                const continueBtn = document.getElementById("continueBtn");
                const originalText = continueBtn.textContent;
                continueBtn.textContent = "Submitting...";
                continueBtn.disabled = true;

                try {
                  // Map category values to API format
                  const categoryMapping = {
                    veg: "Vegetarian",
                    "veg-egg": "Veg + Egg",
                    "veg-meat": "Veg + Meat",
                  };

                  // Extract subcategory from selected value (optional)
                  let subcategoryValue = "";

                  if (
                    subcategorySelect.value &&
                    subcategorySelect.selectedIndex > 0
                  ) {
                    // Use the original text content instead of the lowercase-hyphenated value
                    const subcategoryText =
                      subcategorySelect.options[subcategorySelect.selectedIndex]
                        .textContent;
                    subcategoryValue = subcategoryText;
                  }

                  // Call the submit challenge API
                  const response = await fetch(
                    getApiUrl(API_CONFIG.ENDPOINTS.SUBMIT_CHALLENGE),
                    {
                      method: "POST",
                      headers: {
                        accept: "application/json",
                        "Content-Type": "application/json",
                      },
                      body: JSON.stringify({
                        userId: window.userRegistrationData.userId,
                        category:
                          categoryMapping[categorySelect.value] ||
                          categorySelect.value,
                        subcategory: subcategoryValue,
                        // type: type
                      }),
                    }
                  );

                  if (response.ok) {
                    const result = await response.json();

                    // Store meal preferences and submission result
                    window.userRegistrationData.category = categorySelect.value;
                    window.userRegistrationData.subcategory = subcategoryValue;
                    window.userRegistrationData.submissionResult = result;

                    // Download PDF if URL is provided in response
                    if (
                      result.data &&
                      typeof result.data === "string" &&
                      result.data.includes(".pdf")
                    ) {
                      const pdfUrl = result.data;
                      const fileName = `Daawat-${window.userRegistrationData.duration.replace(
                        " ",
                        "-"
                      )}-Challenge-Meal-Plan.pdf`;

                      // Store PDF URL for later use
                      window.userRegistrationData.pdfUrl = pdfUrl;

                      // Add a short delay to ensure UI updates, then start download
                      setTimeout(() => {
                        // Create a hidden <a> tag to trigger the download
                        const link = document.createElement("a");
                        link.href = pdfUrl;
                        link.download = fileName;
                        link.target = "_blank"; // optional – opens in new tab if direct download fails
                        document.body.appendChild(link);
                        link.click();
                        document.body.removeChild(link);
                      }, 1000);
                    } else {
                      console.warn(
                        "No PDF URL found in response data:",
                        result.data
                      );
                    }

                    // Update localStorage
                    localStorage.setItem(
                      "userRegistrationData",
                      JSON.stringify(window.userRegistrationData)
                    );

                    // Proceed to next step
                    currentStep = 2;
                    loadStep(currentStep);
                  } else {
                    const errorData = await response.json().catch(() => ({}));
                    console.error("Challenge submission failed:", errorData);
                    document.getElementById(
                      "categoryError"
                    ).textContent = `Submission failed: ${
                      errorData.message || "Please try again later"
                    }`;
                    document.getElementById("categoryError").style.display =
                      "block";
                  }
                } catch (error) {
                  console.error(
                    "Network error during challenge submission:",
                    error
                  );
                  document.getElementById("categoryError").textContent =
                    "Network error! Please check your connection and try again.";
                  document.getElementById("categoryError").style.display =
                    "block";
                } finally {
                  // Reset button state
                  continueBtn.textContent = originalText;
                  continueBtn.disabled = false;
                }
              });

            nextBtn.style.display = "none";
          }

          // ✅ STEP 3 — Final Congratulations
          if (index === 2) {
            finishQuiz();
          }
        }

        function animateQuestionChange(callback) {
          quizCard.classList.add("fade-out");
          quizCard.addEventListener("animationend", function handler() {
            quizCard.classList.remove("fade-out");
            callback();
            quizCard.classList.add("fade-in");
            quizCard.addEventListener("animationend", function innerHandler() {
              quizCard.classList.remove("fade-in");
              quizCard.removeEventListener("animationend", innerHandler);
            });
            quizCard.removeEventListener("animationend", handler);
          });
        }

        function finishQuiz() {
          // Determine badge image based on duration
          let badgeImage = "img/bronze.png"; // default
          if (
            window.userRegistrationData &&
            window.userRegistrationData.duration
          ) {
            const duration = window.userRegistrationData.duration;
            if (duration === "7 days") {
              badgeImage = "img/bronze.png";
            } else if (duration === "14 days") {
              badgeImage = "img/silver.png";
            } else if (duration === "21 days") {
              badgeImage = "img/gold.png";
            } else if (duration === "30 days") {
              badgeImage = "img/diamond.png";
            }
          }

          animateQuestionChange(() => {
            questionEl.textContent = "🎉 Congratulations!";
            optionsEl.innerHTML = `
                <div class="d-flex justify-content-center flex-column align-items-center gap-4">
                    <img src="${badgeImage}" alt="Achievement Badge" class="congrats-image" />
                    <button class="animated-button btn" id="shareBtn">
                        <svg viewBox="0 0 24 24" class="arr-2" xmlns="http://www.w3.org/2000/svg">
                            <path d="M16.1716 10.9999L10.8076 5.63589L12.2218 4.22168L20 11.9999L12.2218 19.778L10.8076 18.3638L16.1716 12.9999H4V10.9999H16.1716Z"></path>
                        </svg>
                        <span class="text">Share</span>
                        <span class="circle"></span>
                        <svg viewBox="0 0 24 24" class="arr-1" xmlns="http://www.w3.org/2000/svg">
                            <path d="M16.1716 10.9999L10.8076 5.63589L12.2218 4.22168L20 11.9999L12.2218 19.778L10.8076 18.3638L16.1716 12.9999H4V10.9999H16.1716Z"></path>
                        </svg>
                    </button>
                    <p>Your diet plan download should start automatically. If it doesn’t, 
                    <a href="${
                      window.userRegistrationData?.pdfUrl ||
                      "img/sample-local-pdf.pdf"
                    }" 
                       download="Daawat-${
                         window.userRegistrationData?.duration?.replace(
                           " ",
                           "-"
                         ) || "Rice"
                       }-Challenge-Meal-Plan.pdf" 
                       target="_blank" id="manualDownloadLink" 
                       style="color: #e74c3c; font-weight: bold; text-decoration: underline;">
                       click here
                    </a> to download.</p>
                </div>
            `;
            nextBtn.style.display = "none";
          });
        }

        // Modal initialization
        const quizModalEl = document.getElementById("dynamicChallengeModal");
        quizModalEl.addEventListener("shown.bs.modal", () => {
          currentStep = 0;
          loadStep(currentStep);
        });
      });
    </script>

    <script>
      const riceSlider = new Swiper(".riceMythSlider", {
        slidesPerView: 2,
        spaceBetween: 30,
        loop: true,
        autoplay: {
          delay: 3000,
          disableOnInteraction: false,
        },
        navigation: {
          nextEl: ".riceMythNext",
          prevEl: ".riceMythPrev",
        },
        breakpoints: {
          0: { slidesPerView: 1 },
          768: { slidesPerView: 2 },
        },
      });

      // Click handling
      document.querySelectorAll(".riceMythSlide").forEach((slide) => {
        slide.addEventListener("click", () => {
          const mythType = slide.getAttribute("data-myth");
          // 👇 Add your custom click action here
          // e.g., open modal, navigate, fetch data, etc.
        });
      });
    </script>

    <script>
      const counterEl = document.getElementById("countdown");
      let currentCount = 10986;

      if (counterEl) {
        renderCounter(currentCount);
      }

      // simulate backend updates
      setInterval(() => {
        const newCount = currentCount + Math.floor(Math.random() * 10 + 1);
        updateCounter(newCount);
        currentCount = newCount;
      }, 3000);

      function renderCounter(number) {
        if (!counterEl) return;

        counterEl.innerHTML = "";
        const digits = number.toLocaleString().split("");

        digits.forEach((digit) => {
          const digitEl = document.createElement("div");
          digitEl.classList.add("digit");

          if (digit === ",") {
            digitEl.innerHTML = `<span style="width:10px;color:#fff;">,</span>`;
          } else {
            digitEl.innerHTML = `
        <div class="digit-inner">
          <span>${digit}</span>
        </div>
      `;
          }

          counterEl.appendChild(digitEl);
        });
      }

      function updateCounter(newNumber) {
        const newDigits = newNumber.toLocaleString().split("");
        const oldDigits = currentCount.toLocaleString().split("");

        if (newDigits.length !== oldDigits.length) {
          renderCounter(newNumber);
          return;
        }

        const digitEls = document.querySelectorAll(".digit-inner");

        newDigits.forEach((digit, i) => {
          if (digit === ",") return;

          const inner = digitEls[i];
          const currentDigit = oldDigits[i];
          const newDigit = digit;

          if (currentDigit !== newDigit) {
            const direction = newDigit > currentDigit ? -1 : 1;
            const temp = document.createElement("span");
            temp.textContent = newDigit;

            // move up or down depending on direction
            if (direction === -1) {
              inner.appendChild(temp);
              inner.style.transform = "translateY(-40px)";
            } else {
              inner.insertBefore(temp, inner.firstChild);
              inner.style.transform = "translateY(40px)";
            }

            // reset after animation
            setTimeout(() => {
              inner.style.transition = "none";
              inner.innerHTML = `<span>${newDigit}</span>`;
              inner.style.transform = "translateY(0)";
              setTimeout(
                () => (inner.style.transition = "transform 0.4s ease-in-out"),
                50
              );
            }, 400);
          }
        });
      }
    </script>

    <script>
      function FlipDigit1(value) {
        // ✅ create the new parent span
        var parent = document.createElement("span");
        parent.className = "flip-clock__wrapper1";

        // ✅ create the existing piece span
        var el = document.createElement("span");
        el.className = "flip-clock__piece m-0";

        // inner HTML for the piece
        el.innerHTML =
          '<b class="flip-clock__card card1">' +
          '<b class="card__top"></b>' +
          '<b class="card__bottom"></b>' +
          '<b class="card__back"><b class="card__bottom"></b></b>' +
          "</b>";

        // append piece inside wrapper
        parent.appendChild(el);

        // store element references
        this.el = parent; // ✅ now the main element is the wrapper
        this.piece = el;
        this.top = el.querySelector(".card__top");
        this.bottom = el.querySelector(".card__bottom");
        this.back = el.querySelector(".card__back");
        this.backBottom = el.querySelector(".card__back .card__bottom");
        this.currentValue = "";
        this.update(value);
      }

      FlipDigit1.prototype.update = function (val) {
        val = val.toString();
        if (val !== this.currentValue) {
          this.back.setAttribute("data-value", this.currentValue);
          this.bottom.setAttribute("data-value", this.currentValue);
          this.currentValue = val;
          this.top.textContent = val;
          this.backBottom.setAttribute("data-value", val);

          this.el.classList.remove("flip");
          void this.el.offsetWidth;
          this.el.classList.add("flip");
        }
      };

      function FlipCounter1(container, startValue = 1) {
        this.container = container;
        this.value = startValue;
        this.digits = [];
        this.render();
        this.start();
      }

      FlipCounter1.prototype.render = function () {
        this.container.innerHTML = "";
        var str = this.value.toString();
        this.digits = [];
        for (var i = 0; i < str.length; i++) {
          var digit = new FlipDigit1(str[i]);
          this.container.appendChild(digit.el);
          this.digits.push(digit);
        }
      };

      FlipCounter1.prototype.update = function () {
        var str = this.value.toString();
        if (str.length > this.digits.length) {
          this.render();
        } else {
          for (var i = 0; i < this.digits.length; i++) {
            var digitIndex = str.length - this.digits.length + i;
            var val = digitIndex >= 0 ? str[digitIndex] : "0";
            this.digits[i].update(val);
          }
        }
      };

      FlipCounter1.prototype.start = function () {
        // Remove auto-increment - will be updated via API
      };

      FlipCounter1.prototype.setValue = function (newValue) {
        this.value = newValue;
        this.update();
      };

      FlipCounter1.prototype.animateFromTo = function (
        fromValue,
        toValue,
        callback
      ) {
        var self = this;
        var currentVal = fromValue;
        var targetVal = toValue;

        // Clear any existing animation
        if (this.animationInterval) {
          clearInterval(this.animationInterval);
        }

        // Set initial value
        this.setValue(currentVal);

        if (currentVal === targetVal) {
          if (callback) callback();
          return;
        }

        // Calculate animation speed based on difference
        var difference = Math.abs(targetVal - currentVal);
        var increment = currentVal < targetVal ? 1 : -1;
        var speed = difference > 100 ? 200 : difference > 50 ? 180 : 1000; // Faster for larger differences

        this.animationInterval = setInterval(function () {
          currentVal += increment;
          self.setValue(currentVal);

          if (currentVal === targetVal) {
            clearInterval(self.animationInterval);
            self.animationInterval = null;
            if (callback) callback();
          }
        }, speed);
      };

      var counter = new FlipCounter1(document.getElementById("countdown"), 0);
    </script>

    <script>
      function FlipDigit2(value) {
        // ✅ create the new parent span
        var parent = document.createElement("span");
        parent.className = "flip-clock__wrapper";

        // ✅ create the existing piece span
        var el = document.createElement("span");
        el.className = "flip-clock__piece m-0";

        // inner HTML for the piece
        el.innerHTML =
          '<b class="flip-clock__card card2">' +
          '<b class="card__top2"></b>' +
          '<b class="card__bottom2"></b>' +
          '<b class="card__back2"><b class="card__bottom2"></b></b>' +
          "</b>";

        // append piece inside wrapper
        parent.appendChild(el);

        // store element references
        this.el = parent; // ✅ now the main element is the wrapper
        this.piece = el;
        this.top = el.querySelector(".card__top2");
        this.bottom = el.querySelector(".card__bottom2");
        this.back = el.querySelector(".card__back2");
        this.backBottom = el.querySelector(".card__back2 .card__bottom2");
        this.currentValue = "";
        this.update(value);
      }

      FlipDigit2.prototype.update = function (val) {
        val = val.toString();
        if (val !== this.currentValue) {
          this.back.setAttribute("data-value", this.currentValue);
          this.bottom.setAttribute("data-value", this.currentValue);
          this.currentValue = val;
          this.top.textContent = val;
          this.backBottom.setAttribute("data-value", val);

          this.el.classList.remove("flip2");
          void this.el.offsetWidth;
          this.el.classList.add("flip2");
        }
      };

      function FlipCounter2(container, startValue = 1) {
        this.container = container;
        this.value = startValue;
        this.digits = [];
        this.render();
        this.start();
      }

      FlipCounter2.prototype.render = function () {
        this.container.innerHTML = "";
        var str = this.value.toString();
        this.digits = [];
        for (var i = 0; i < str.length; i++) {
          var digit = new FlipDigit2(str[i]);
          this.container.appendChild(digit.el);
          this.digits.push(digit);
        }
      };

      FlipCounter2.prototype.update = function () {
        var str = this.value.toString();
        if (str.length > this.digits.length) {
          this.render();
        } else {
          for (var i = 0; i < this.digits.length; i++) {
            var digitIndex = str.length - this.digits.length + i;
            var val = digitIndex >= 0 ? str[digitIndex] : "0";
            this.digits[i].update(val);
          }
        }
      };

      FlipCounter2.prototype.start = function () {
        // Remove auto-increment - will be updated via API
      };

      FlipCounter2.prototype.setValue = function (newValue) {
        this.value = newValue;
        this.update();
      };

      FlipCounter2.prototype.animateFromTo = function (
        fromValue,
        toValue,
        callback
      ) {
        var self = this;
        var currentVal = fromValue;
        var targetVal = toValue;

        // Clear any existing animation
        if (this.animationInterval) {
          clearInterval(this.animationInterval);
        }

        // Set initial value
        this.setValue(currentVal);

        if (currentVal === targetVal) {
          if (callback) callback();
          return;
        }

        // Calculate animation speed based on difference
        var difference = Math.abs(targetVal - currentVal);
        var increment = currentVal < targetVal ? 1 : -1;
        var speed = difference > 100 ? 200 : difference > 50 ? 180 : 1000; // Faster for larger differences

        this.animationInterval = setInterval(function () {
          currentVal += increment;
          self.setValue(currentVal);

          if (currentVal === targetVal) {
            clearInterval(self.animationInterval);
            self.animationInterval = null;
            if (callback) callback();
          }
        }, speed);
      };

      var counter1 = new FlipCounter2(document.getElementById("countdown1"), 0);

      // Global function to force counter updates (can be called externally)
      window.forceCounterUpdate = function () {
        if (animationTimeout) {
          clearTimeout(animationTimeout);
          animationTimeout = null;
        }
        isAnimating = false;
        if (isInitialized) {
          checkForUpdates();
        } else {
          initializeCounters();
        }
      };

      // Global variables to track animation state and values
      let isAnimating = false;
      let animationTimeout = null;
      let isInitialized = false;
      let currentValues = {
        challengerProgress: 0,
        erProgress: 0,
      };

      // Function to initialize counters with first API call
      async function initializeCounters() {
        try {
          const progressData = await fetchProgressData();

          if (progressData) {
            let completedAnimations = 0;
            let totalAnimations = 0;

            // Callback function to track when initial animations complete
            function onInitialAnimationComplete() {
              completedAnimations++;
              if (completedAnimations >= totalAnimations) {
                isAnimating = false;
                isInitialized = true;
                // Start periodic API checking after initial animation
                animationTimeout = setTimeout(checkForUpdates, 10000);
              }
            }

            // Initialize challengerProgress counter
            if (progressData.challengerProgress) {
              const prevVal =
                progressData.challengerProgress.previousValue || 0;
              const currVal = progressData.challengerProgress.currentValue || 0;
              currentValues.challengerProgress = currVal;
              totalAnimations++;
              counter.animateFromTo(
                prevVal,
                currVal,
                onInitialAnimationComplete
              );
            }

            // Initialize erProgress counter
            if (progressData.erProgress) {
              const prevVal = progressData.erProgress.previousValue || 0;
              const currVal = progressData.erProgress.currentValue || 0;
              currentValues.erProgress = currVal;
              totalAnimations++;
              counter1.animateFromTo(
                prevVal,
                currVal,
                onInitialAnimationComplete
              );
            }

            if (totalAnimations > 0) {
              isAnimating = true;
            } else {
              // No animations needed, start checking immediately
              isInitialized = true;
              animationTimeout = setTimeout(checkForUpdates, 10000);
            }
          } else {
            // Fallback values if initial API fails
            counter.setValue(27);
            counter1.setValue(483408);
            currentValues.challengerProgress = 27;
            currentValues.erProgress = 483408;
            isInitialized = true;
            // Start checking for updates
            animationTimeout = setTimeout(checkForUpdates, 10000);
          }
        } catch (error) {
          console.error("Error initializing counters:", error);
          // Fallback values
          counter.setValue(27);
          counter1.setValue(483408);
          currentValues.challengerProgress = 27;
          currentValues.erProgress = 483408;
          isInitialized = true;
          // Start checking for updates
          animationTimeout = setTimeout(checkForUpdates, 10000);
        }
      }

      // Function to periodically check for new values
      async function checkForUpdates() {
        if (isAnimating) {
          // If still animating, check again later
          animationTimeout = setTimeout(checkForUpdates, 10000);
          return;
        }

        try {
          const progressData = await fetchProgressData();

          if (progressData) {
            let hasChanges = false;
            let completedAnimations = 0;
            let totalAnimations = 0;

            // Callback function to track when animations complete
            function onAnimationComplete() {
              completedAnimations++;
              if (completedAnimations >= totalAnimations) {
                isAnimating = false;
                // Schedule next check after animations complete
                animationTimeout = setTimeout(checkForUpdates, 10000);
              }
            }

            // Check challengerProgress counter
            if (progressData.challengerProgress) {
              const newVal = progressData.challengerProgress.currentValue || 0;
              if (newVal !== currentValues.challengerProgress) {
                hasChanges = true;
                totalAnimations++;
                // Use current value as previous value for smooth transition
                const prevVal = currentValues.challengerProgress;
                currentValues.challengerProgress = newVal;
                counter.animateFromTo(prevVal, newVal, onAnimationComplete);
              }
            }

            // Check erProgress counter
            if (progressData.erProgress) {
              const newVal = progressData.erProgress.currentValue || 0;
              if (newVal !== currentValues.erProgress) {
                hasChanges = true;
                totalAnimations++;
                // Use current value as previous value for smooth transition
                const prevVal = currentValues.erProgress;
                currentValues.erProgress = newVal;
                counter1.animateFromTo(prevVal, newVal, onAnimationComplete);
              }
            }

            // If no changes detected, schedule next check
            if (!hasChanges) {
              animationTimeout = setTimeout(checkForUpdates, 10000);
            } else {
              isAnimating = true;
            }
          } else {
            // API failed, retry after delay
            animationTimeout = setTimeout(checkForUpdates, 10000);
          }
        } catch (error) {
          console.error("Error checking for updates:", error);
          // Retry after delay
          animationTimeout = setTimeout(checkForUpdates, 10000);
        }
      }

      // Initialize counters on page load
      document.addEventListener("DOMContentLoaded", function () {
        // Initialize counters with first API call and start periodic checking
        initializeCounters();
      });

      // Clean up timeout on page unload
      window.addEventListener("beforeunload", function () {
        if (animationTimeout) {
          clearTimeout(animationTimeout);
        }
        if (counter.animationInterval) {
          clearInterval(counter.animationInterval);
        }
        if (counter1.animationInterval) {
          clearInterval(counter1.animationInterval);
        }
      });
    </script>

    <script>
      function toggleMenu() {
        document.getElementById("navMenu").classList.toggle("active");
        document.getElementById("menuOverlay").classList.toggle("active");
        document.querySelector(".hamburger").classList.toggle("open");
      }
    </script>

    <script>
      const goTopBtn = document.getElementById("goTopBtn");
      const circle = document.querySelector(".progress-ring__circle");
      const radius = circle.r.baseVal.value;
      const circumference = 2 * Math.PI * radius;

      circle.style.strokeDasharray = `${circumference} ${circumference}`;
      circle.style.strokeDashoffset = circumference;

      // Scroll progress update
      window.addEventListener("scroll", () => {
        const scrollTop = window.scrollY;
        const docHeight = document.body.scrollHeight - window.innerHeight;
        const scrollPercent = scrollTop / docHeight;
        const offset = circumference - scrollPercent * circumference;
        circle.style.strokeDashoffset = offset;
      });

      // Scroll to top animation
      goTopBtn.addEventListener("click", () => {
        const scrollDuration = 700;
        const start = window.scrollY;
        const startTime = performance.now();

        function scrollAnimation(currentTime) {
          const elapsed = currentTime - startTime;
          const progress = Math.min(elapsed / scrollDuration, 1);
          window.scrollTo(0, start * (1 - progress));
          // reverse circle as we scroll up
          const offset = circumference * progress;
          circle.style.strokeDashoffset = offset;
          if (progress < 1) requestAnimationFrame(scrollAnimation);
        }

        requestAnimationFrame(scrollAnimation);
      });

      // Shop Rice button → Amazon Daawat search
      document.getElementById("shopRiceBtn").addEventListener("click", () => {
        window.open(
          "https://www.amazon.in/stores/Daawat/page/4F50B176-6702-4AC2-B9A2-0CABE8AE6204",
          "_blank"
        );
      });
    </script>
  </body>
</html>
